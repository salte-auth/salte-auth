/**
 * @salte-io/salte-auth JavaScript Library v2.0.3
 *
 * @license MIT (https://github.com/salte-io/salte-auth/blob/master/LICENSE)
 *
 * Made with â™¥ by Ceci <admin@cecilias.me>, Dave Woodward <dave@salte.io>
 */
(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory(require("lodash"));
	else if(typeof define === 'function' && define.amd)
		define("salte.auth", ["lodash"], factory);
	else if(typeof exports === 'object')
		exports["salte.auth"] = factory(require("lodash"));
	else
		root["salte.auth"] = factory(root["_"]);
})(typeof self !== 'undefined' ? self : this, function(__WEBPACK_EXTERNAL_MODULE_0__) {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 3);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/*!*************************************************************************************!*\
  !*** external {"root":"_","commonjs":"lodash","commonjs2":"lodash","amd":"lodash"} ***!
  \*************************************************************************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports) {

eval("module.exports = __WEBPACK_EXTERNAL_MODULE_0__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCB7XCJyb290XCI6XCJfXCIsXCJjb21tb25qc1wiOlwibG9kYXNoXCIsXCJjb21tb25qczJcIjpcImxvZGFzaFwiLFwiYW1kXCI6XCJsb2Rhc2hcIn0/NTVkMCJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMF9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIHtcInJvb3RcIjpcIl9cIixcImNvbW1vbmpzXCI6XCJsb2Rhc2hcIixcImNvbW1vbmpzMlwiOlwibG9kYXNoXCIsXCJhbWRcIjpcImxvZGFzaFwifVxuLy8gbW9kdWxlIGlkID0gMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///0\n");

/***/ }),
/* 1 */
/*!***********************************************!*\
  !*** ../node_modules/uuid/lib/rng-browser.js ***!
  \***********************************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports) {

eval("// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && msCrypto.getRandomValues.bind(msCrypto));\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi9ub2RlX21vZHVsZXMvdXVpZC9saWIvcm5nLWJyb3dzZXIuanM/N2ZlMCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBVbmlxdWUgSUQgY3JlYXRpb24gcmVxdWlyZXMgYSBoaWdoIHF1YWxpdHkgcmFuZG9tICMgZ2VuZXJhdG9yLiAgSW4gdGhlXG4vLyBicm93c2VyIHRoaXMgaXMgYSBsaXR0bGUgY29tcGxpY2F0ZWQgZHVlIHRvIHVua25vd24gcXVhbGl0eSBvZiBNYXRoLnJhbmRvbSgpXG4vLyBhbmQgaW5jb25zaXN0ZW50IHN1cHBvcnQgZm9yIHRoZSBgY3J5cHRvYCBBUEkuICBXZSBkbyB0aGUgYmVzdCB3ZSBjYW4gdmlhXG4vLyBmZWF0dXJlLWRldGVjdGlvblxuXG4vLyBnZXRSYW5kb21WYWx1ZXMgbmVlZHMgdG8gYmUgaW52b2tlZCBpbiBhIGNvbnRleHQgd2hlcmUgXCJ0aGlzXCIgaXMgYSBDcnlwdG8gaW1wbGVtZW50YXRpb24uXG52YXIgZ2V0UmFuZG9tVmFsdWVzID0gKHR5cGVvZihjcnlwdG8pICE9ICd1bmRlZmluZWQnICYmIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMuYmluZChjcnlwdG8pKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICh0eXBlb2YobXNDcnlwdG8pICE9ICd1bmRlZmluZWQnICYmIG1zQ3J5cHRvLmdldFJhbmRvbVZhbHVlcy5iaW5kKG1zQ3J5cHRvKSk7XG5pZiAoZ2V0UmFuZG9tVmFsdWVzKSB7XG4gIC8vIFdIQVRXRyBjcnlwdG8gUk5HIC0gaHR0cDovL3dpa2kud2hhdHdnLm9yZy93aWtpL0NyeXB0b1xuICB2YXIgcm5kczggPSBuZXcgVWludDhBcnJheSgxNik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW5kZWZcblxuICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHdoYXR3Z1JORygpIHtcbiAgICBnZXRSYW5kb21WYWx1ZXMocm5kczgpO1xuICAgIHJldHVybiBybmRzODtcbiAgfTtcbn0gZWxzZSB7XG4gIC8vIE1hdGgucmFuZG9tKCktYmFzZWQgKFJORylcbiAgLy9cbiAgLy8gSWYgYWxsIGVsc2UgZmFpbHMsIHVzZSBNYXRoLnJhbmRvbSgpLiAgSXQncyBmYXN0LCBidXQgaXMgb2YgdW5zcGVjaWZpZWRcbiAgLy8gcXVhbGl0eS5cbiAgdmFyIHJuZHMgPSBuZXcgQXJyYXkoMTYpO1xuXG4gIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gbWF0aFJORygpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgcjsgaSA8IDE2OyBpKyspIHtcbiAgICAgIGlmICgoaSAmIDB4MDMpID09PSAwKSByID0gTWF0aC5yYW5kb20oKSAqIDB4MTAwMDAwMDAwO1xuICAgICAgcm5kc1tpXSA9IHIgPj4+ICgoaSAmIDB4MDMpIDw8IDMpICYgMHhmZjtcbiAgICB9XG5cbiAgICByZXR1cm4gcm5kcztcbiAgfTtcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL25vZGVfbW9kdWxlcy91dWlkL2xpYi9ybmctYnJvd3Nlci5qc1xuLy8gbW9kdWxlIGlkID0gMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///1\n");

/***/ }),
/* 2 */
/*!***********************************************!*\
  !*** ../node_modules/uuid/lib/bytesToUuid.js ***!
  \***********************************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports) {

eval("/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  return bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]];\n}\n\nmodule.exports = bytesToUuid;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi9ub2RlX21vZHVsZXMvdXVpZC9saWIvYnl0ZXNUb1V1aWQuanM/NzQwOCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvbnZlcnQgYXJyYXkgb2YgMTYgYnl0ZSB2YWx1ZXMgdG8gVVVJRCBzdHJpbmcgZm9ybWF0IG9mIHRoZSBmb3JtOlxuICogWFhYWFhYWFgtWFhYWC1YWFhYLVhYWFgtWFhYWFhYWFhYWFhYXG4gKi9cbnZhciBieXRlVG9IZXggPSBbXTtcbmZvciAodmFyIGkgPSAwOyBpIDwgMjU2OyArK2kpIHtcbiAgYnl0ZVRvSGV4W2ldID0gKGkgKyAweDEwMCkudG9TdHJpbmcoMTYpLnN1YnN0cigxKTtcbn1cblxuZnVuY3Rpb24gYnl0ZXNUb1V1aWQoYnVmLCBvZmZzZXQpIHtcbiAgdmFyIGkgPSBvZmZzZXQgfHwgMDtcbiAgdmFyIGJ0aCA9IGJ5dGVUb0hleDtcbiAgcmV0dXJuIGJ0aFtidWZbaSsrXV0gKyBidGhbYnVmW2krK11dICtcbiAgICAgICAgICBidGhbYnVmW2krK11dICsgYnRoW2J1ZltpKytdXSArICctJyArXG4gICAgICAgICAgYnRoW2J1ZltpKytdXSArIGJ0aFtidWZbaSsrXV0gKyAnLScgK1xuICAgICAgICAgIGJ0aFtidWZbaSsrXV0gKyBidGhbYnVmW2krK11dICsgJy0nICtcbiAgICAgICAgICBidGhbYnVmW2krK11dICsgYnRoW2J1ZltpKytdXSArICctJyArXG4gICAgICAgICAgYnRoW2J1ZltpKytdXSArIGJ0aFtidWZbaSsrXV0gK1xuICAgICAgICAgIGJ0aFtidWZbaSsrXV0gKyBidGhbYnVmW2krK11dICtcbiAgICAgICAgICBidGhbYnVmW2krK11dICsgYnRoW2J1ZltpKytdXTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBieXRlc1RvVXVpZDtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL25vZGVfbW9kdWxlcy91dWlkL2xpYi9ieXRlc1RvVXVpZC5qc1xuLy8gbW9kdWxlIGlkID0gMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2\n");

/***/ }),
/* 3 */
/*!*****************************!*\
  !*** multi ./salte-auth.js ***!
  \*****************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(/*! ./salte-auth.js */4);


/***/ }),
/* 4 */
/*!***********************!*\
  !*** ./salte-auth.js ***!
  \***********************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SalteAuth = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _lodash = __webpack_require__(/*! lodash */ 0);\n\nvar _uuid = __webpack_require__(/*! uuid */ 5);\n\nvar _uuid2 = _interopRequireDefault(_uuid);\n\nvar _salteAuthProviders = __webpack_require__(/*! ./salte-auth.providers.js */ 8);\n\nvar _salteAuthProfile = __webpack_require__(/*! ./salte-auth.profile.js */ 13);\n\nvar _salteAuthUtilities = __webpack_require__(/*! ./salte-auth.utilities.js */ 14);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Disable certain security validations if your provider doesn't support them.\n * @typedef {Object} Validation\n * @property {Boolean} [nonce=true] Passing false will disable nonce validation, leaving you vulnerable to replay attacks.\n * @property {Boolean} [state=true] Passing false will disable state validation, leaving you vulnerable to XSRF attacks.\n * @property {Boolean} [azp=true] Passing false will disable azp validation.\n * @property {Boolean} [aud=true] Passing false will disable aud validation.\n */\n\n/**\n * The configuration for salte auth\n * @typedef {Object} Config\n * @property {String} providerUrl The base url of your identity provider.\n * @property {('id_token'|'id_token token')} responseType The response type to authenticate with.\n * @property {String} redirectUrl The redirect url specified in your identity provider.\n * @property {String} clientId The client id of your identity provider\n * @property {String} scope A list of space-delimited claims used to determine what user information is provided and what access is given. Most providers require 'openid'.\n * @property {Boolean|Array<String>} routes A list of secured routes. If true is provided then all routes are secured.\n * @property {Array<String|RegExp>} endpoints A list of secured endpoints.\n * @property {('auth0'|'azure'|'cognito'|'wso2')} provider The identity provider you're using.\n * @property {Function} [redirectLoginCallback] A callback that is invoked when a redirect login fails or succeeds.\n * @property {('session'|'local')} [storageType='session'] The Storage api to keep authenticate information stored in.\n * @property {Boolean|Validation} [validation] Used to disable certain security validations if your provider doesn't support them.\n */\n\n/**\n * Authentication Controller\n */\nvar SalteAuth = function () {\n  /**\n   * Sets up Salte Auth\n   * @param {Config} config configuration for salte auth\n   */\n  function SalteAuth(config) {\n    var _this = this;\n\n    _classCallCheck(this, SalteAuth);\n\n    if (window.salte.auth) {\n      return window.salte.auth;\n    }\n\n    if (!config) {\n      throw new ReferenceError('A config must be provided.');\n    }\n\n    /**\n     * The supported identity providers\n     * @type {Providers}\n     * @private\n     */\n    this.$providers = _salteAuthProviders.Providers;\n    /**\n     * The active authentication promises\n     * @private\n     */\n    this.$promises = {};\n    /**\n     * The configuration for salte auth\n     * @private\n     */\n    this.$config = config;\n    this.$config = (0, _lodash.defaultsDeep)(config, this.$provider.defaultConfig);\n    /**\n     * Various utility functions for salte auth\n     * @type {SalteAuthUtilities}\n     * @private\n     */\n    this.$utilities = new _salteAuthUtilities.SalteAuthUtilities();\n\n    /**\n     * The user profile for salte auth\n     * @type {SalteAuthProfile}\n     */\n    this.profile = new _salteAuthProfile.SalteAuthProfile(this.$config);\n\n    if (this.$utilities.$iframe) {\n      parent.document.body.removeChild(this.$utilities.$iframe);\n    } else if (this.$utilities.$popup) {\n      // We need to utilize local storage to retain our parsed values\n      if (this.$config.storageType === 'session') {\n        this.profile.$$transfer('session', 'local');\n      }\n      setTimeout(this.$utilities.$popup.close);\n    } else if (this.profile.$redirectUrl && location.href !== this.profile.$redirectUrl) {\n      var error = this.profile.$validate();\n      if (error) {\n        this.profile.$clear();\n      } else {\n        location.href = this.profile.$redirectUrl;\n        this.profile.$redirectUrl = undefined;\n      }\n      this.$config.redirectLoginCallback(error);\n    } else {\n      this.$utilities.addXHRInterceptor(function (request, data) {\n        if (_this.$utilities.checkForMatchingUrl(request.$url, _this.$config.endpoints)) {\n          return _this.retrieveAccessToken().then(function (accessToken) {\n            request.setRequestHeader('Authorization', 'Bearer ' + accessToken);\n          });\n        }\n      });\n\n      this.$utilities.addFetchInterceptor(function (input, options) {\n        if (_this.$utilities.checkForMatchingUrl(input, _this.$config.endpoints)) {\n          return _this.retrieveAccessToken().then(function (accessToken) {\n            options.headers = options.headers || {};\n            options.headers.Authorization = 'Bearer ' + accessToken;\n          });\n        }\n      });\n\n      window.addEventListener('popstate', this.$$onRouteChanged.bind(this));\n      document.addEventListener('click', this.$$onRouteChanged.bind(this));\n      setTimeout(this.$$onRouteChanged.bind(this));\n    }\n    window.salte.auth = this;\n  }\n\n  /**\n   * Returns the configured provider\n   * @type {Class|Object}\n   * @private\n   */\n\n\n  _createClass(SalteAuth, [{\n    key: 'loginWithIframe',\n\n\n    /**\n     * Authenticates using the iframe-based OAuth flow.\n     * @return {Promise} a promise that resolves when we finish authenticating\n     */\n    value: function loginWithIframe() {\n      var _this2 = this;\n\n      if (this.$promises.login) {\n        return this.$promises.login;\n      }\n\n      this.profile.$clear();\n      this.$promises.login = this.$utilities.createIframe(this.$loginUrl, true).then(function () {\n        _this2.$promises.login = null;\n        var error = _this2.profile.$validate();\n\n        if (error) {\n          _this2.profile.$clear();\n          return Promise.reject(error);\n        }\n      }).catch(function (error) {\n        _this2.$promises.login = null;\n        return Promise.reject(error);\n      });\n\n      return this.$promises.login;\n    }\n\n    /**\n     * Authenticates using the popup-based OAuth flow.\n     * @return {Promise} a promise that resolves when we finish authenticating\n     */\n\n  }, {\n    key: 'loginWithPopup',\n    value: function loginWithPopup() {\n      var _this3 = this;\n\n      if (this.$promises.login) {\n        return this.$promises.login;\n      }\n\n      this.profile.$clear();\n      this.$promises.login = this.$utilities.openPopup(this.$loginUrl).then(function () {\n        _this3.$promises.login = null;\n        // We need to utilize local storage to retain our parsed values\n        if (_this3.$config.storageType === 'session') {\n          _this3.profile.$$transfer('local', 'session');\n        }\n        var error = _this3.profile.$validate();\n\n        if (error) {\n          _this3.profile.$clear();\n          return Promise.reject(error);\n        }\n      }).catch(function (error) {\n        _this3.$promises.login = null;\n        return Promise.reject(error);\n      });\n\n      return this.$promises.login;\n    }\n\n    /**\n     * Authenticates using the redirect-based OAuth flow.\n     */\n\n  }, {\n    key: 'loginWithRedirect',\n    value: function loginWithRedirect() {\n      if (!this.$config.redirectLoginCallback) {\n        throw new ReferenceError('A redirectLoginCallback is required to invoke \"loginWithRedirect\"!');\n      }\n\n      this.profile.$clear();\n      this.profile.$redirectUrl = this.profile.$redirectUrl || location.href;\n      location.href = this.$loginUrl;\n    }\n\n    /**\n     * Unauthenticates using the iframe-based OAuth flow.\n     * @return {Promise} a promise that resolves when we finish deauthenticating\n     */\n\n  }, {\n    key: 'logoutWithIframe',\n    value: function logoutWithIframe() {\n      var _this4 = this;\n\n      if (this.$promises.logout) {\n        return this.$promises.logout;\n      }\n\n      this.profile.$clear();\n      this.$promises.logout = this.$utilities.createIframe(this.$deauthorizeUrl).then(function () {\n        _this4.$promises.logout = null;\n      });\n      return this.$promises.logout;\n    }\n\n    /**\n     * Unauthenticates using the popup-based OAuth flow.\n     * @return {Promise} a promise that resolves when we finish deauthenticating\n     */\n\n  }, {\n    key: 'logoutWithPopup',\n    value: function logoutWithPopup() {\n      var _this5 = this;\n\n      if (this.$promises.logout) {\n        return this.$promises.logout;\n      }\n\n      this.profile.$clear();\n      this.$promises.logout = this.$utilities.openPopup(this.$deauthorizeUrl).then(function () {\n        _this5.$promises.logout = null;\n      });\n\n      return this.$promises.logout;\n    }\n\n    /**\n     * Logs the user out of their configured identity provider.\n     */\n\n  }, {\n    key: 'logoutWithRedirect',\n    value: function logoutWithRedirect() {\n      this.profile.$clear();\n      location.href = this.$deauthorizeUrl;\n    }\n\n    /**\n     * Authenticates, requests the access token, and returns it if necessary.\n     * @return {Promise<string>} a promise that resolves when we retrieve the access token\n     */\n\n  }, {\n    key: 'retrieveAccessToken',\n    value: function retrieveAccessToken() {\n      var _this6 = this;\n\n      if (this.$promises.token) {\n        return this.$promises.token;\n      }\n\n      this.$promises.token = Promise.resolve();\n      if (this.profile.idTokenExpired) {\n        if (this.$config.loginType === 'popup') {\n          this.$promises.token = this.loginWithPopup();\n        } else if ([undefined, null, 'iframe'].indexOf(this.$config.loginType) !== -1) {\n          this.$promises.token = this.loginWithIframe();\n        } else {\n          this.$promises.token = null;\n          return Promise.reject(new ReferenceError('Invaid Login Type (' + this.$config.loginType + ')'));\n        }\n      }\n\n      this.$promises.token = this.$promises.token.then(function () {\n        _this6.profile.$clearErrors();\n        if (_this6.profile.accessTokenExpired) {\n          return _this6.$utilities.createIframe(_this6.$accessTokenUrl).then(function () {\n            _this6.$promises.token = null;\n            var error = _this6.profile.$validate(true);\n\n            if (error) {\n              return Promise.reject(error);\n            }\n            return _this6.profile.$accessToken;\n          });\n        }\n        _this6.$promises.token = null;\n        return _this6.profile.$accessToken;\n      }).catch(function (error) {\n        _this6.$promises.token = null;\n        return Promise.reject(error);\n      });\n\n      return this.$promises.token;\n    }\n\n    /**\n     * Checks if the current route is secured and authenticates the user if necessary\n     * @ignore\n     */\n\n  }, {\n    key: '$$onRouteChanged',\n    value: function $$onRouteChanged() {\n      if (!this.$utilities.isRouteSecure(location.href, this.$config.routes)) return;\n\n      this.retrieveAccessToken();\n    }\n  }, {\n    key: '$provider',\n    get: function get() {\n      if (!this.$config.provider) {\n        throw new ReferenceError('A provider must be specified');\n      }\n\n      if (typeof this.$config.provider === 'string') {\n        var provider = this.$providers[this.$config.provider];\n        if (!provider) {\n          throw new ReferenceError('Unknown Provider (' + this.$config.provider + ')');\n        }\n        return provider;\n      }\n\n      return this.$config.provider;\n    }\n\n    /**\n     * The authentication url to retrieve the access token\n     * @type {String}\n     * @private\n     */\n\n  }, {\n    key: '$accessTokenUrl',\n    get: function get() {\n      this.profile.$localState = _uuid2.default.v4();\n      this.profile.$nonce = _uuid2.default.v4();\n\n      var authorizeEndpoint = this.$config.providerUrl + '/authorize';\n      if (this.$provider.authorizeEndpoint) {\n        authorizeEndpoint = this.$provider.authorizeEndpoint.call(this, this.$config);\n      }\n\n      return this.$utilities.createUrl(authorizeEndpoint, (0, _lodash.assign)({\n        'state': this.profile.$localState,\n        'nonce': this.profile.$nonce,\n        'response_type': 'token',\n        'redirect_uri': this.$config.redirectUrl,\n        'client_id': this.$config.clientId,\n        'scope': this.$config.scope,\n        'prompt': 'none'\n      }, this.$config.queryParams));\n    }\n\n    /**\n     * The authentication url to retrieve the id token\n     * @type {String}\n     * @private\n     */\n\n  }, {\n    key: '$loginUrl',\n    get: function get() {\n      this.profile.$localState = _uuid2.default.v4();\n      this.profile.$nonce = _uuid2.default.v4();\n\n      var authorizeEndpoint = this.$config.providerUrl + '/authorize';\n      if (this.$provider.authorizeEndpoint) {\n        authorizeEndpoint = this.$provider.authorizeEndpoint.call(this, this.$config);\n      }\n\n      return this.$utilities.createUrl(authorizeEndpoint, (0, _lodash.assign)({\n        'state': this.profile.$localState,\n        'nonce': this.profile.$nonce,\n        'response_type': this.$config.responseType,\n        'redirect_uri': this.$config.redirectUrl,\n        'client_id': this.$config.clientId,\n        'scope': this.$config.scope\n      }, this.$config.queryParams));\n    }\n\n    /**\n     * The url to logout of the configured provider\n     * @type {String}\n     * @private\n     */\n\n  }, {\n    key: '$deauthorizeUrl',\n    get: function get() {\n      return this.$provider.deauthorizeUrl.call(this, this.$config);\n    }\n  }]);\n\n  return SalteAuth;\n}();\n\n(0, _lodash.set)(window, 'salte.SalteAuth', (0, _lodash.get)(window, 'salte.SalteAuth', SalteAuth));\nexports.SalteAuth = SalteAuth;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvc2FsdGUtYXV0aC5qcz82MzI2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFzc2lnbiwgZGVmYXVsdHNEZWVwLCBnZXQsIHNldCB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgdXVpZCBmcm9tICd1dWlkJztcblxuaW1wb3J0IHsgUHJvdmlkZXJzIH0gZnJvbSAnLi9zYWx0ZS1hdXRoLnByb3ZpZGVycy5qcyc7XG5pbXBvcnQgeyBTYWx0ZUF1dGhQcm9maWxlIH0gZnJvbSAnLi9zYWx0ZS1hdXRoLnByb2ZpbGUuanMnO1xuaW1wb3J0IHsgU2FsdGVBdXRoVXRpbGl0aWVzIH0gZnJvbSAnLi9zYWx0ZS1hdXRoLnV0aWxpdGllcy5qcyc7XG5cbi8qKlxuICogRGlzYWJsZSBjZXJ0YWluIHNlY3VyaXR5IHZhbGlkYXRpb25zIGlmIHlvdXIgcHJvdmlkZXIgZG9lc24ndCBzdXBwb3J0IHRoZW0uXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBWYWxpZGF0aW9uXG4gKiBAcHJvcGVydHkge0Jvb2xlYW59IFtub25jZT10cnVlXSBQYXNzaW5nIGZhbHNlIHdpbGwgZGlzYWJsZSBub25jZSB2YWxpZGF0aW9uLCBsZWF2aW5nIHlvdSB2dWxuZXJhYmxlIHRvIHJlcGxheSBhdHRhY2tzLlxuICogQHByb3BlcnR5IHtCb29sZWFufSBbc3RhdGU9dHJ1ZV0gUGFzc2luZyBmYWxzZSB3aWxsIGRpc2FibGUgc3RhdGUgdmFsaWRhdGlvbiwgbGVhdmluZyB5b3UgdnVsbmVyYWJsZSB0byBYU1JGIGF0dGFja3MuXG4gKiBAcHJvcGVydHkge0Jvb2xlYW59IFthenA9dHJ1ZV0gUGFzc2luZyBmYWxzZSB3aWxsIGRpc2FibGUgYXpwIHZhbGlkYXRpb24uXG4gKiBAcHJvcGVydHkge0Jvb2xlYW59IFthdWQ9dHJ1ZV0gUGFzc2luZyBmYWxzZSB3aWxsIGRpc2FibGUgYXVkIHZhbGlkYXRpb24uXG4gKi9cblxuLyoqXG4gKiBUaGUgY29uZmlndXJhdGlvbiBmb3Igc2FsdGUgYXV0aFxuICogQHR5cGVkZWYge09iamVjdH0gQ29uZmlnXG4gKiBAcHJvcGVydHkge1N0cmluZ30gcHJvdmlkZXJVcmwgVGhlIGJhc2UgdXJsIG9mIHlvdXIgaWRlbnRpdHkgcHJvdmlkZXIuXG4gKiBAcHJvcGVydHkgeygnaWRfdG9rZW4nfCdpZF90b2tlbiB0b2tlbicpfSByZXNwb25zZVR5cGUgVGhlIHJlc3BvbnNlIHR5cGUgdG8gYXV0aGVudGljYXRlIHdpdGguXG4gKiBAcHJvcGVydHkge1N0cmluZ30gcmVkaXJlY3RVcmwgVGhlIHJlZGlyZWN0IHVybCBzcGVjaWZpZWQgaW4geW91ciBpZGVudGl0eSBwcm92aWRlci5cbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBjbGllbnRJZCBUaGUgY2xpZW50IGlkIG9mIHlvdXIgaWRlbnRpdHkgcHJvdmlkZXJcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBzY29wZSBBIGxpc3Qgb2Ygc3BhY2UtZGVsaW1pdGVkIGNsYWltcyB1c2VkIHRvIGRldGVybWluZSB3aGF0IHVzZXIgaW5mb3JtYXRpb24gaXMgcHJvdmlkZWQgYW5kIHdoYXQgYWNjZXNzIGlzIGdpdmVuLiBNb3N0IHByb3ZpZGVycyByZXF1aXJlICdvcGVuaWQnLlxuICogQHByb3BlcnR5IHtCb29sZWFufEFycmF5PFN0cmluZz59IHJvdXRlcyBBIGxpc3Qgb2Ygc2VjdXJlZCByb3V0ZXMuIElmIHRydWUgaXMgcHJvdmlkZWQgdGhlbiBhbGwgcm91dGVzIGFyZSBzZWN1cmVkLlxuICogQHByb3BlcnR5IHtBcnJheTxTdHJpbmd8UmVnRXhwPn0gZW5kcG9pbnRzIEEgbGlzdCBvZiBzZWN1cmVkIGVuZHBvaW50cy5cbiAqIEBwcm9wZXJ0eSB7KCdhdXRoMCd8J2F6dXJlJ3wnY29nbml0byd8J3dzbzInKX0gcHJvdmlkZXIgVGhlIGlkZW50aXR5IHByb3ZpZGVyIHlvdSdyZSB1c2luZy5cbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IFtyZWRpcmVjdExvZ2luQ2FsbGJhY2tdIEEgY2FsbGJhY2sgdGhhdCBpcyBpbnZva2VkIHdoZW4gYSByZWRpcmVjdCBsb2dpbiBmYWlscyBvciBzdWNjZWVkcy5cbiAqIEBwcm9wZXJ0eSB7KCdzZXNzaW9uJ3wnbG9jYWwnKX0gW3N0b3JhZ2VUeXBlPSdzZXNzaW9uJ10gVGhlIFN0b3JhZ2UgYXBpIHRvIGtlZXAgYXV0aGVudGljYXRlIGluZm9ybWF0aW9uIHN0b3JlZCBpbi5cbiAqIEBwcm9wZXJ0eSB7Qm9vbGVhbnxWYWxpZGF0aW9ufSBbdmFsaWRhdGlvbl0gVXNlZCB0byBkaXNhYmxlIGNlcnRhaW4gc2VjdXJpdHkgdmFsaWRhdGlvbnMgaWYgeW91ciBwcm92aWRlciBkb2Vzbid0IHN1cHBvcnQgdGhlbS5cbiAqL1xuXG4vKipcbiAqIEF1dGhlbnRpY2F0aW9uIENvbnRyb2xsZXJcbiAqL1xuY2xhc3MgU2FsdGVBdXRoIHtcbiAgLyoqXG4gICAqIFNldHMgdXAgU2FsdGUgQXV0aFxuICAgKiBAcGFyYW0ge0NvbmZpZ30gY29uZmlnIGNvbmZpZ3VyYXRpb24gZm9yIHNhbHRlIGF1dGhcbiAgICovXG4gIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgIGlmICh3aW5kb3cuc2FsdGUuYXV0aCkge1xuICAgICAgcmV0dXJuIHdpbmRvdy5zYWx0ZS5hdXRoO1xuICAgIH1cblxuICAgIGlmICghY29uZmlnKSB7XG4gICAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoJ0EgY29uZmlnIG11c3QgYmUgcHJvdmlkZWQuJyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIHN1cHBvcnRlZCBpZGVudGl0eSBwcm92aWRlcnNcbiAgICAgKiBAdHlwZSB7UHJvdmlkZXJzfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy4kcHJvdmlkZXJzID0gUHJvdmlkZXJzO1xuICAgIC8qKlxuICAgICAqIFRoZSBhY3RpdmUgYXV0aGVudGljYXRpb24gcHJvbWlzZXNcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuJHByb21pc2VzID0ge307XG4gICAgLyoqXG4gICAgICogVGhlIGNvbmZpZ3VyYXRpb24gZm9yIHNhbHRlIGF1dGhcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuJGNvbmZpZyA9IGNvbmZpZztcbiAgICB0aGlzLiRjb25maWcgPSBkZWZhdWx0c0RlZXAoY29uZmlnLCB0aGlzLiRwcm92aWRlci5kZWZhdWx0Q29uZmlnKTtcbiAgICAvKipcbiAgICAgKiBWYXJpb3VzIHV0aWxpdHkgZnVuY3Rpb25zIGZvciBzYWx0ZSBhdXRoXG4gICAgICogQHR5cGUge1NhbHRlQXV0aFV0aWxpdGllc31cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuJHV0aWxpdGllcyA9IG5ldyBTYWx0ZUF1dGhVdGlsaXRpZXMoKTtcblxuICAgIC8qKlxuICAgICAqIFRoZSB1c2VyIHByb2ZpbGUgZm9yIHNhbHRlIGF1dGhcbiAgICAgKiBAdHlwZSB7U2FsdGVBdXRoUHJvZmlsZX1cbiAgICAgKi9cbiAgICB0aGlzLnByb2ZpbGUgPSBuZXcgU2FsdGVBdXRoUHJvZmlsZSh0aGlzLiRjb25maWcpO1xuXG4gICAgaWYgKHRoaXMuJHV0aWxpdGllcy4kaWZyYW1lKSB7XG4gICAgICBwYXJlbnQuZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0aGlzLiR1dGlsaXRpZXMuJGlmcmFtZSk7XG4gICAgfSBlbHNlIGlmICh0aGlzLiR1dGlsaXRpZXMuJHBvcHVwKSB7XG4gICAgICAvLyBXZSBuZWVkIHRvIHV0aWxpemUgbG9jYWwgc3RvcmFnZSB0byByZXRhaW4gb3VyIHBhcnNlZCB2YWx1ZXNcbiAgICAgIGlmICh0aGlzLiRjb25maWcuc3RvcmFnZVR5cGUgPT09ICdzZXNzaW9uJykge1xuICAgICAgICB0aGlzLnByb2ZpbGUuJCR0cmFuc2Zlcignc2Vzc2lvbicsICdsb2NhbCcpO1xuICAgICAgfVxuICAgICAgc2V0VGltZW91dCh0aGlzLiR1dGlsaXRpZXMuJHBvcHVwLmNsb3NlKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMucHJvZmlsZS4kcmVkaXJlY3RVcmwgJiYgbG9jYXRpb24uaHJlZiAhPT0gdGhpcy5wcm9maWxlLiRyZWRpcmVjdFVybCkge1xuICAgICAgY29uc3QgZXJyb3IgPSB0aGlzLnByb2ZpbGUuJHZhbGlkYXRlKCk7XG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgdGhpcy5wcm9maWxlLiRjbGVhcigpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbG9jYXRpb24uaHJlZiA9IHRoaXMucHJvZmlsZS4kcmVkaXJlY3RVcmw7XG4gICAgICAgIHRoaXMucHJvZmlsZS4kcmVkaXJlY3RVcmwgPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICB0aGlzLiRjb25maWcucmVkaXJlY3RMb2dpbkNhbGxiYWNrKGVycm9yKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy4kdXRpbGl0aWVzLmFkZFhIUkludGVyY2VwdG9yKChyZXF1ZXN0LCBkYXRhKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLiR1dGlsaXRpZXMuY2hlY2tGb3JNYXRjaGluZ1VybChyZXF1ZXN0LiR1cmwsIHRoaXMuJGNvbmZpZy5lbmRwb2ludHMpKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMucmV0cmlldmVBY2Nlc3NUb2tlbigpLnRoZW4oKGFjY2Vzc1Rva2VuKSA9PiB7XG4gICAgICAgICAgICByZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7YWNjZXNzVG9rZW59YCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLiR1dGlsaXRpZXMuYWRkRmV0Y2hJbnRlcmNlcHRvcigoaW5wdXQsIG9wdGlvbnMpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuJHV0aWxpdGllcy5jaGVja0Zvck1hdGNoaW5nVXJsKGlucHV0LCB0aGlzLiRjb25maWcuZW5kcG9pbnRzKSkge1xuICAgICAgICAgIHJldHVybiB0aGlzLnJldHJpZXZlQWNjZXNzVG9rZW4oKS50aGVuKChhY2Nlc3NUb2tlbikgPT4ge1xuICAgICAgICAgICAgb3B0aW9ucy5oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzIHx8IHt9O1xuICAgICAgICAgICAgb3B0aW9ucy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPSBgQmVhcmVyICR7YWNjZXNzVG9rZW59YDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdwb3BzdGF0ZScsIHRoaXMuJCRvblJvdXRlQ2hhbmdlZC5iaW5kKHRoaXMpKTtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy4kJG9uUm91dGVDaGFuZ2VkLmJpbmQodGhpcykpO1xuICAgICAgc2V0VGltZW91dCh0aGlzLiQkb25Sb3V0ZUNoYW5nZWQuYmluZCh0aGlzKSk7XG4gICAgfVxuICAgIHdpbmRvdy5zYWx0ZS5hdXRoID0gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBjb25maWd1cmVkIHByb3ZpZGVyXG4gICAqIEB0eXBlIHtDbGFzc3xPYmplY3R9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBnZXQgJHByb3ZpZGVyKCkge1xuICAgIGlmICghdGhpcy4kY29uZmlnLnByb3ZpZGVyKSB7XG4gICAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoJ0EgcHJvdmlkZXIgbXVzdCBiZSBzcGVjaWZpZWQnKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHRoaXMuJGNvbmZpZy5wcm92aWRlciA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGNvbnN0IHByb3ZpZGVyID0gdGhpcy4kcHJvdmlkZXJzW3RoaXMuJGNvbmZpZy5wcm92aWRlcl07XG4gICAgICBpZiAoIXByb3ZpZGVyKSB7XG4gICAgICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihgVW5rbm93biBQcm92aWRlciAoJHt0aGlzLiRjb25maWcucHJvdmlkZXJ9KWApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHByb3ZpZGVyO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLiRjb25maWcucHJvdmlkZXI7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGF1dGhlbnRpY2F0aW9uIHVybCB0byByZXRyaWV2ZSB0aGUgYWNjZXNzIHRva2VuXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBnZXQgJGFjY2Vzc1Rva2VuVXJsKCkge1xuICAgIHRoaXMucHJvZmlsZS4kbG9jYWxTdGF0ZSA9IHV1aWQudjQoKTtcbiAgICB0aGlzLnByb2ZpbGUuJG5vbmNlID0gdXVpZC52NCgpO1xuXG4gICAgbGV0IGF1dGhvcml6ZUVuZHBvaW50ID0gYCR7dGhpcy4kY29uZmlnLnByb3ZpZGVyVXJsfS9hdXRob3JpemVgO1xuICAgIGlmICh0aGlzLiRwcm92aWRlci5hdXRob3JpemVFbmRwb2ludCkge1xuICAgICAgYXV0aG9yaXplRW5kcG9pbnQgPSB0aGlzLiRwcm92aWRlci5hdXRob3JpemVFbmRwb2ludC5jYWxsKHRoaXMsIHRoaXMuJGNvbmZpZyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuJHV0aWxpdGllcy5jcmVhdGVVcmwoYXV0aG9yaXplRW5kcG9pbnQsIGFzc2lnbih7XG4gICAgICAnc3RhdGUnOiB0aGlzLnByb2ZpbGUuJGxvY2FsU3RhdGUsXG4gICAgICAnbm9uY2UnOiB0aGlzLnByb2ZpbGUuJG5vbmNlLFxuICAgICAgJ3Jlc3BvbnNlX3R5cGUnOiAndG9rZW4nLFxuICAgICAgJ3JlZGlyZWN0X3VyaSc6IHRoaXMuJGNvbmZpZy5yZWRpcmVjdFVybCxcbiAgICAgICdjbGllbnRfaWQnOiB0aGlzLiRjb25maWcuY2xpZW50SWQsXG4gICAgICAnc2NvcGUnOiB0aGlzLiRjb25maWcuc2NvcGUsXG4gICAgICAncHJvbXB0JzogJ25vbmUnXG4gICAgfSwgdGhpcy4kY29uZmlnLnF1ZXJ5UGFyYW1zKSk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGF1dGhlbnRpY2F0aW9uIHVybCB0byByZXRyaWV2ZSB0aGUgaWQgdG9rZW5cbiAgICogQHR5cGUge1N0cmluZ31cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldCAkbG9naW5VcmwoKSB7XG4gICAgdGhpcy5wcm9maWxlLiRsb2NhbFN0YXRlID0gdXVpZC52NCgpO1xuICAgIHRoaXMucHJvZmlsZS4kbm9uY2UgPSB1dWlkLnY0KCk7XG5cbiAgICBsZXQgYXV0aG9yaXplRW5kcG9pbnQgPSBgJHt0aGlzLiRjb25maWcucHJvdmlkZXJVcmx9L2F1dGhvcml6ZWA7XG4gICAgaWYgKHRoaXMuJHByb3ZpZGVyLmF1dGhvcml6ZUVuZHBvaW50KSB7XG4gICAgICBhdXRob3JpemVFbmRwb2ludCA9IHRoaXMuJHByb3ZpZGVyLmF1dGhvcml6ZUVuZHBvaW50LmNhbGwodGhpcywgdGhpcy4kY29uZmlnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy4kdXRpbGl0aWVzLmNyZWF0ZVVybChhdXRob3JpemVFbmRwb2ludCwgYXNzaWduKHtcbiAgICAgICdzdGF0ZSc6IHRoaXMucHJvZmlsZS4kbG9jYWxTdGF0ZSxcbiAgICAgICdub25jZSc6IHRoaXMucHJvZmlsZS4kbm9uY2UsXG4gICAgICAncmVzcG9uc2VfdHlwZSc6IHRoaXMuJGNvbmZpZy5yZXNwb25zZVR5cGUsXG4gICAgICAncmVkaXJlY3RfdXJpJzogdGhpcy4kY29uZmlnLnJlZGlyZWN0VXJsLFxuICAgICAgJ2NsaWVudF9pZCc6IHRoaXMuJGNvbmZpZy5jbGllbnRJZCxcbiAgICAgICdzY29wZSc6IHRoaXMuJGNvbmZpZy5zY29wZVxuICAgIH0sIHRoaXMuJGNvbmZpZy5xdWVyeVBhcmFtcykpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSB1cmwgdG8gbG9nb3V0IG9mIHRoZSBjb25maWd1cmVkIHByb3ZpZGVyXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBnZXQgJGRlYXV0aG9yaXplVXJsKCkge1xuICAgIHJldHVybiB0aGlzLiRwcm92aWRlci5kZWF1dGhvcml6ZVVybC5jYWxsKHRoaXMsIHRoaXMuJGNvbmZpZyk7XG4gIH1cblxuICAvKipcbiAgICogQXV0aGVudGljYXRlcyB1c2luZyB0aGUgaWZyYW1lLWJhc2VkIE9BdXRoIGZsb3cuXG4gICAqIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gd2UgZmluaXNoIGF1dGhlbnRpY2F0aW5nXG4gICAqL1xuICBsb2dpbldpdGhJZnJhbWUoKSB7XG4gICAgaWYgKHRoaXMuJHByb21pc2VzLmxvZ2luKSB7XG4gICAgICByZXR1cm4gdGhpcy4kcHJvbWlzZXMubG9naW47XG4gICAgfVxuXG4gICAgdGhpcy5wcm9maWxlLiRjbGVhcigpO1xuICAgIHRoaXMuJHByb21pc2VzLmxvZ2luID0gdGhpcy4kdXRpbGl0aWVzLmNyZWF0ZUlmcmFtZSh0aGlzLiRsb2dpblVybCwgdHJ1ZSkudGhlbigoKSA9PiB7XG4gICAgICB0aGlzLiRwcm9taXNlcy5sb2dpbiA9IG51bGw7XG4gICAgICBjb25zdCBlcnJvciA9IHRoaXMucHJvZmlsZS4kdmFsaWRhdGUoKTtcblxuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHRoaXMucHJvZmlsZS4kY2xlYXIoKTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgICAgIH1cbiAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgIHRoaXMuJHByb21pc2VzLmxvZ2luID0gbnVsbDtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcy4kcHJvbWlzZXMubG9naW47XG4gIH1cblxuICAvKipcbiAgICogQXV0aGVudGljYXRlcyB1c2luZyB0aGUgcG9wdXAtYmFzZWQgT0F1dGggZmxvdy5cbiAgICogQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB3ZSBmaW5pc2ggYXV0aGVudGljYXRpbmdcbiAgICovXG4gIGxvZ2luV2l0aFBvcHVwKCkge1xuICAgIGlmICh0aGlzLiRwcm9taXNlcy5sb2dpbikge1xuICAgICAgcmV0dXJuIHRoaXMuJHByb21pc2VzLmxvZ2luO1xuICAgIH1cblxuICAgIHRoaXMucHJvZmlsZS4kY2xlYXIoKTtcbiAgICB0aGlzLiRwcm9taXNlcy5sb2dpbiA9IHRoaXMuJHV0aWxpdGllcy5vcGVuUG9wdXAodGhpcy4kbG9naW5VcmwpLnRoZW4oKCkgPT4ge1xuICAgICAgdGhpcy4kcHJvbWlzZXMubG9naW4gPSBudWxsO1xuICAgICAgLy8gV2UgbmVlZCB0byB1dGlsaXplIGxvY2FsIHN0b3JhZ2UgdG8gcmV0YWluIG91ciBwYXJzZWQgdmFsdWVzXG4gICAgICBpZiAodGhpcy4kY29uZmlnLnN0b3JhZ2VUeXBlID09PSAnc2Vzc2lvbicpIHtcbiAgICAgICAgdGhpcy5wcm9maWxlLiQkdHJhbnNmZXIoJ2xvY2FsJywgJ3Nlc3Npb24nKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGVycm9yID0gdGhpcy5wcm9maWxlLiR2YWxpZGF0ZSgpO1xuXG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgdGhpcy5wcm9maWxlLiRjbGVhcigpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgICAgfVxuICAgIH0pLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgdGhpcy4kcHJvbWlzZXMubG9naW4gPSBudWxsO1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzLiRwcm9taXNlcy5sb2dpbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBBdXRoZW50aWNhdGVzIHVzaW5nIHRoZSByZWRpcmVjdC1iYXNlZCBPQXV0aCBmbG93LlxuICAgKi9cbiAgbG9naW5XaXRoUmVkaXJlY3QoKSB7XG4gICAgaWYgKCF0aGlzLiRjb25maWcucmVkaXJlY3RMb2dpbkNhbGxiYWNrKSB7XG4gICAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoJ0EgcmVkaXJlY3RMb2dpbkNhbGxiYWNrIGlzIHJlcXVpcmVkIHRvIGludm9rZSBcImxvZ2luV2l0aFJlZGlyZWN0XCIhJyk7XG4gICAgfVxuXG4gICAgdGhpcy5wcm9maWxlLiRjbGVhcigpO1xuICAgIHRoaXMucHJvZmlsZS4kcmVkaXJlY3RVcmwgPSB0aGlzLnByb2ZpbGUuJHJlZGlyZWN0VXJsIHx8IGxvY2F0aW9uLmhyZWY7XG4gICAgbG9jYXRpb24uaHJlZiA9IHRoaXMuJGxvZ2luVXJsO1xuICB9XG5cbiAgLyoqXG4gICAqIFVuYXV0aGVudGljYXRlcyB1c2luZyB0aGUgaWZyYW1lLWJhc2VkIE9BdXRoIGZsb3cuXG4gICAqIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gd2UgZmluaXNoIGRlYXV0aGVudGljYXRpbmdcbiAgICovXG4gIGxvZ291dFdpdGhJZnJhbWUoKSB7XG4gICAgaWYgKHRoaXMuJHByb21pc2VzLmxvZ291dCkge1xuICAgICAgcmV0dXJuIHRoaXMuJHByb21pc2VzLmxvZ291dDtcbiAgICB9XG5cbiAgICB0aGlzLnByb2ZpbGUuJGNsZWFyKCk7XG4gICAgdGhpcy4kcHJvbWlzZXMubG9nb3V0ID0gdGhpcy4kdXRpbGl0aWVzLmNyZWF0ZUlmcmFtZSh0aGlzLiRkZWF1dGhvcml6ZVVybCkudGhlbigoKSA9PiB7XG4gICAgICB0aGlzLiRwcm9taXNlcy5sb2dvdXQgPSBudWxsO1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzLiRwcm9taXNlcy5sb2dvdXQ7XG4gIH1cblxuICAvKipcbiAgICogVW5hdXRoZW50aWNhdGVzIHVzaW5nIHRoZSBwb3B1cC1iYXNlZCBPQXV0aCBmbG93LlxuICAgKiBAcmV0dXJuIHtQcm9taXNlfSBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHdlIGZpbmlzaCBkZWF1dGhlbnRpY2F0aW5nXG4gICAqL1xuICBsb2dvdXRXaXRoUG9wdXAoKSB7XG4gICAgaWYgKHRoaXMuJHByb21pc2VzLmxvZ291dCkge1xuICAgICAgcmV0dXJuIHRoaXMuJHByb21pc2VzLmxvZ291dDtcbiAgICB9XG5cbiAgICB0aGlzLnByb2ZpbGUuJGNsZWFyKCk7XG4gICAgdGhpcy4kcHJvbWlzZXMubG9nb3V0ID0gdGhpcy4kdXRpbGl0aWVzLm9wZW5Qb3B1cCh0aGlzLiRkZWF1dGhvcml6ZVVybCkudGhlbigoKSA9PiB7XG4gICAgICB0aGlzLiRwcm9taXNlcy5sb2dvdXQgPSBudWxsO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXMuJHByb21pc2VzLmxvZ291dDtcbiAgfVxuXG4gIC8qKlxuICAgKiBMb2dzIHRoZSB1c2VyIG91dCBvZiB0aGVpciBjb25maWd1cmVkIGlkZW50aXR5IHByb3ZpZGVyLlxuICAgKi9cbiAgbG9nb3V0V2l0aFJlZGlyZWN0KCkge1xuICAgIHRoaXMucHJvZmlsZS4kY2xlYXIoKTtcbiAgICBsb2NhdGlvbi5ocmVmID0gdGhpcy4kZGVhdXRob3JpemVVcmw7XG4gIH1cblxuICAvKipcbiAgICogQXV0aGVudGljYXRlcywgcmVxdWVzdHMgdGhlIGFjY2VzcyB0b2tlbiwgYW5kIHJldHVybnMgaXQgaWYgbmVjZXNzYXJ5LlxuICAgKiBAcmV0dXJuIHtQcm9taXNlPHN0cmluZz59IGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gd2UgcmV0cmlldmUgdGhlIGFjY2VzcyB0b2tlblxuICAgKi9cbiAgcmV0cmlldmVBY2Nlc3NUb2tlbigpIHtcbiAgICBpZiAodGhpcy4kcHJvbWlzZXMudG9rZW4pIHtcbiAgICAgIHJldHVybiB0aGlzLiRwcm9taXNlcy50b2tlbjtcbiAgICB9XG5cbiAgICB0aGlzLiRwcm9taXNlcy50b2tlbiA9IFByb21pc2UucmVzb2x2ZSgpO1xuICAgIGlmICh0aGlzLnByb2ZpbGUuaWRUb2tlbkV4cGlyZWQpIHtcbiAgICAgIGlmICh0aGlzLiRjb25maWcubG9naW5UeXBlID09PSAncG9wdXAnKSB7XG4gICAgICAgIHRoaXMuJHByb21pc2VzLnRva2VuID0gdGhpcy5sb2dpbldpdGhQb3B1cCgpO1xuICAgICAgfSBlbHNlIGlmIChbdW5kZWZpbmVkLCBudWxsLCAnaWZyYW1lJ10uaW5kZXhPZih0aGlzLiRjb25maWcubG9naW5UeXBlKSAhPT0gLTEpIHtcbiAgICAgICAgdGhpcy4kcHJvbWlzZXMudG9rZW4gPSB0aGlzLmxvZ2luV2l0aElmcmFtZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy4kcHJvbWlzZXMudG9rZW4gPSBudWxsO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IFJlZmVyZW5jZUVycm9yKGBJbnZhaWQgTG9naW4gVHlwZSAoJHt0aGlzLiRjb25maWcubG9naW5UeXBlfSlgKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy4kcHJvbWlzZXMudG9rZW4gPSB0aGlzLiRwcm9taXNlcy50b2tlbi50aGVuKCgpID0+IHtcbiAgICAgIHRoaXMucHJvZmlsZS4kY2xlYXJFcnJvcnMoKTtcbiAgICAgIGlmICh0aGlzLnByb2ZpbGUuYWNjZXNzVG9rZW5FeHBpcmVkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiR1dGlsaXRpZXMuY3JlYXRlSWZyYW1lKHRoaXMuJGFjY2Vzc1Rva2VuVXJsKS50aGVuKCgpID0+IHtcbiAgICAgICAgICB0aGlzLiRwcm9taXNlcy50b2tlbiA9IG51bGw7XG4gICAgICAgICAgY29uc3QgZXJyb3IgPSB0aGlzLnByb2ZpbGUuJHZhbGlkYXRlKHRydWUpO1xuXG4gICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdGhpcy5wcm9maWxlLiRhY2Nlc3NUb2tlbjtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICB0aGlzLiRwcm9taXNlcy50b2tlbiA9IG51bGw7XG4gICAgICByZXR1cm4gdGhpcy5wcm9maWxlLiRhY2Nlc3NUb2tlbjtcbiAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgIHRoaXMuJHByb21pc2VzLnRva2VuID0gbnVsbDtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcy4kcHJvbWlzZXMudG9rZW47XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIGlmIHRoZSBjdXJyZW50IHJvdXRlIGlzIHNlY3VyZWQgYW5kIGF1dGhlbnRpY2F0ZXMgdGhlIHVzZXIgaWYgbmVjZXNzYXJ5XG4gICAqIEBpZ25vcmVcbiAgICovXG4gICQkb25Sb3V0ZUNoYW5nZWQoKSB7XG4gICAgaWYgKCF0aGlzLiR1dGlsaXRpZXMuaXNSb3V0ZVNlY3VyZShsb2NhdGlvbi5ocmVmLCB0aGlzLiRjb25maWcucm91dGVzKSkgcmV0dXJuO1xuXG4gICAgdGhpcy5yZXRyaWV2ZUFjY2Vzc1Rva2VuKCk7XG4gIH1cbn1cblxuc2V0KHdpbmRvdywgJ3NhbHRlLlNhbHRlQXV0aCcsIGdldCh3aW5kb3csICdzYWx0ZS5TYWx0ZUF1dGgnLCBTYWx0ZUF1dGgpKTtcbmV4cG9ydCB7IFNhbHRlQXV0aCB9O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9zYWx0ZS1hdXRoLmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTtBQUNBO0FBQUE7QUFDQTs7O0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBOzs7OztBQUNBOzs7Ozs7Ozs7QUFTQTs7Ozs7Ozs7Ozs7Ozs7OztBQWdCQTs7O0FBR0E7QUFDQTs7OztBQUlBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBS0E7QUFDQTs7OztBQUlBO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0E7Ozs7O0FBS0E7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQStFQTs7OztBQUlBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O0FBSUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7OztBQUlBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7OztBQUlBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7QUFJQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQTVPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQVNBO0FBQ0E7QUFDQTs7Ozs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBUUE7QUFDQTtBQUNBOzs7Ozs7OztBQUtBO0FBQ0E7QUFDQTs7Ozs7O0FBdUtBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///4\n");

/***/ }),
/* 5 */
/*!*************************************!*\
  !*** ../node_modules/uuid/index.js ***!
  \*************************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

eval("var v1 = __webpack_require__(/*! ./v1 */ 6);\nvar v4 = __webpack_require__(/*! ./v4 */ 7);\n\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\n\nmodule.exports = uuid;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi9ub2RlX21vZHVsZXMvdXVpZC9pbmRleC5qcz9hOTAzIl0sInNvdXJjZXNDb250ZW50IjpbInZhciB2MSA9IHJlcXVpcmUoJy4vdjEnKTtcbnZhciB2NCA9IHJlcXVpcmUoJy4vdjQnKTtcblxudmFyIHV1aWQgPSB2NDtcbnV1aWQudjEgPSB2MTtcbnV1aWQudjQgPSB2NDtcblxubW9kdWxlLmV4cG9ydHMgPSB1dWlkO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vbm9kZV9tb2R1bGVzL3V1aWQvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///5\n");

/***/ }),
/* 6 */
/*!**********************************!*\
  !*** ../node_modules/uuid/v1.js ***!
  \**********************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

eval("var rng = __webpack_require__(/*! ./lib/rng */ 1);\nvar bytesToUuid = __webpack_require__(/*! ./lib/bytesToUuid */ 2);\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\nvar _clockseq;\n\n// Previous uuid creation time\nvar _lastMSecs = 0;\nvar _lastNSecs = 0;\n\n// See https://github.com/broofa/node-uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n  if (node == null || clockseq == null) {\n    var seedBytes = rng();\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [\n        seedBytes[0] | 0x01,\n        seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]\n      ];\n    }\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  }\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : bytesToUuid(b);\n}\n\nmodule.exports = v1;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi9ub2RlX21vZHVsZXMvdXVpZC92MS5qcz84NTU1Il0sInNvdXJjZXNDb250ZW50IjpbInZhciBybmcgPSByZXF1aXJlKCcuL2xpYi9ybmcnKTtcbnZhciBieXRlc1RvVXVpZCA9IHJlcXVpcmUoJy4vbGliL2J5dGVzVG9VdWlkJyk7XG5cbi8vICoqYHYxKClgIC0gR2VuZXJhdGUgdGltZS1iYXNlZCBVVUlEKipcbi8vXG4vLyBJbnNwaXJlZCBieSBodHRwczovL2dpdGh1Yi5jb20vTGlvc0svVVVJRC5qc1xuLy8gYW5kIGh0dHA6Ly9kb2NzLnB5dGhvbi5vcmcvbGlicmFyeS91dWlkLmh0bWxcblxudmFyIF9ub2RlSWQ7XG52YXIgX2Nsb2Nrc2VxO1xuXG4vLyBQcmV2aW91cyB1dWlkIGNyZWF0aW9uIHRpbWVcbnZhciBfbGFzdE1TZWNzID0gMDtcbnZhciBfbGFzdE5TZWNzID0gMDtcblxuLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9icm9vZmEvbm9kZS11dWlkIGZvciBBUEkgZGV0YWlsc1xuZnVuY3Rpb24gdjEob3B0aW9ucywgYnVmLCBvZmZzZXQpIHtcbiAgdmFyIGkgPSBidWYgJiYgb2Zmc2V0IHx8IDA7XG4gIHZhciBiID0gYnVmIHx8IFtdO1xuXG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICB2YXIgbm9kZSA9IG9wdGlvbnMubm9kZSB8fCBfbm9kZUlkO1xuICB2YXIgY2xvY2tzZXEgPSBvcHRpb25zLmNsb2Nrc2VxICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNsb2Nrc2VxIDogX2Nsb2Nrc2VxO1xuXG4gIC8vIG5vZGUgYW5kIGNsb2Nrc2VxIG5lZWQgdG8gYmUgaW5pdGlhbGl6ZWQgdG8gcmFuZG9tIHZhbHVlcyBpZiB0aGV5J3JlIG5vdFxuICAvLyBzcGVjaWZpZWQuICBXZSBkbyB0aGlzIGxhemlseSB0byBtaW5pbWl6ZSBpc3N1ZXMgcmVsYXRlZCB0byBpbnN1ZmZpY2llbnRcbiAgLy8gc3lzdGVtIGVudHJvcHkuICBTZWUgIzE4OVxuICBpZiAobm9kZSA9PSBudWxsIHx8IGNsb2Nrc2VxID09IG51bGwpIHtcbiAgICB2YXIgc2VlZEJ5dGVzID0gcm5nKCk7XG4gICAgaWYgKG5vZGUgPT0gbnVsbCkge1xuICAgICAgLy8gUGVyIDQuNSwgY3JlYXRlIGFuZCA0OC1iaXQgbm9kZSBpZCwgKDQ3IHJhbmRvbSBiaXRzICsgbXVsdGljYXN0IGJpdCA9IDEpXG4gICAgICBub2RlID0gX25vZGVJZCA9IFtcbiAgICAgICAgc2VlZEJ5dGVzWzBdIHwgMHgwMSxcbiAgICAgICAgc2VlZEJ5dGVzWzFdLCBzZWVkQnl0ZXNbMl0sIHNlZWRCeXRlc1szXSwgc2VlZEJ5dGVzWzRdLCBzZWVkQnl0ZXNbNV1cbiAgICAgIF07XG4gICAgfVxuICAgIGlmIChjbG9ja3NlcSA9PSBudWxsKSB7XG4gICAgICAvLyBQZXIgNC4yLjIsIHJhbmRvbWl6ZSAoMTQgYml0KSBjbG9ja3NlcVxuICAgICAgY2xvY2tzZXEgPSBfY2xvY2tzZXEgPSAoc2VlZEJ5dGVzWzZdIDw8IDggfCBzZWVkQnl0ZXNbN10pICYgMHgzZmZmO1xuICAgIH1cbiAgfVxuXG4gIC8vIFVVSUQgdGltZXN0YW1wcyBhcmUgMTAwIG5hbm8tc2Vjb25kIHVuaXRzIHNpbmNlIHRoZSBHcmVnb3JpYW4gZXBvY2gsXG4gIC8vICgxNTgyLTEwLTE1IDAwOjAwKS4gIEpTTnVtYmVycyBhcmVuJ3QgcHJlY2lzZSBlbm91Z2ggZm9yIHRoaXMsIHNvXG4gIC8vIHRpbWUgaXMgaGFuZGxlZCBpbnRlcm5hbGx5IGFzICdtc2VjcycgKGludGVnZXIgbWlsbGlzZWNvbmRzKSBhbmQgJ25zZWNzJ1xuICAvLyAoMTAwLW5hbm9zZWNvbmRzIG9mZnNldCBmcm9tIG1zZWNzKSBzaW5jZSB1bml4IGVwb2NoLCAxOTcwLTAxLTAxIDAwOjAwLlxuICB2YXIgbXNlY3MgPSBvcHRpb25zLm1zZWNzICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1zZWNzIDogbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cbiAgLy8gUGVyIDQuMi4xLjIsIHVzZSBjb3VudCBvZiB1dWlkJ3MgZ2VuZXJhdGVkIGR1cmluZyB0aGUgY3VycmVudCBjbG9ja1xuICAvLyBjeWNsZSB0byBzaW11bGF0ZSBoaWdoZXIgcmVzb2x1dGlvbiBjbG9ja1xuICB2YXIgbnNlY3MgPSBvcHRpb25zLm5zZWNzICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm5zZWNzIDogX2xhc3ROU2VjcyArIDE7XG5cbiAgLy8gVGltZSBzaW5jZSBsYXN0IHV1aWQgY3JlYXRpb24gKGluIG1zZWNzKVxuICB2YXIgZHQgPSAobXNlY3MgLSBfbGFzdE1TZWNzKSArIChuc2VjcyAtIF9sYXN0TlNlY3MpLzEwMDAwO1xuXG4gIC8vIFBlciA0LjIuMS4yLCBCdW1wIGNsb2Nrc2VxIG9uIGNsb2NrIHJlZ3Jlc3Npb25cbiAgaWYgKGR0IDwgMCAmJiBvcHRpb25zLmNsb2Nrc2VxID09PSB1bmRlZmluZWQpIHtcbiAgICBjbG9ja3NlcSA9IGNsb2Nrc2VxICsgMSAmIDB4M2ZmZjtcbiAgfVxuXG4gIC8vIFJlc2V0IG5zZWNzIGlmIGNsb2NrIHJlZ3Jlc3NlcyAobmV3IGNsb2Nrc2VxKSBvciB3ZSd2ZSBtb3ZlZCBvbnRvIGEgbmV3XG4gIC8vIHRpbWUgaW50ZXJ2YWxcbiAgaWYgKChkdCA8IDAgfHwgbXNlY3MgPiBfbGFzdE1TZWNzKSAmJiBvcHRpb25zLm5zZWNzID09PSB1bmRlZmluZWQpIHtcbiAgICBuc2VjcyA9IDA7XG4gIH1cblxuICAvLyBQZXIgNC4yLjEuMiBUaHJvdyBlcnJvciBpZiB0b28gbWFueSB1dWlkcyBhcmUgcmVxdWVzdGVkXG4gIGlmIChuc2VjcyA+PSAxMDAwMCkge1xuICAgIHRocm93IG5ldyBFcnJvcigndXVpZC52MSgpOiBDYW5cXCd0IGNyZWF0ZSBtb3JlIHRoYW4gMTBNIHV1aWRzL3NlYycpO1xuICB9XG5cbiAgX2xhc3RNU2VjcyA9IG1zZWNzO1xuICBfbGFzdE5TZWNzID0gbnNlY3M7XG4gIF9jbG9ja3NlcSA9IGNsb2Nrc2VxO1xuXG4gIC8vIFBlciA0LjEuNCAtIENvbnZlcnQgZnJvbSB1bml4IGVwb2NoIHRvIEdyZWdvcmlhbiBlcG9jaFxuICBtc2VjcyArPSAxMjIxOTI5MjgwMDAwMDtcblxuICAvLyBgdGltZV9sb3dgXG4gIHZhciB0bCA9ICgobXNlY3MgJiAweGZmZmZmZmYpICogMTAwMDAgKyBuc2VjcykgJSAweDEwMDAwMDAwMDtcbiAgYltpKytdID0gdGwgPj4+IDI0ICYgMHhmZjtcbiAgYltpKytdID0gdGwgPj4+IDE2ICYgMHhmZjtcbiAgYltpKytdID0gdGwgPj4+IDggJiAweGZmO1xuICBiW2krK10gPSB0bCAmIDB4ZmY7XG5cbiAgLy8gYHRpbWVfbWlkYFxuICB2YXIgdG1oID0gKG1zZWNzIC8gMHgxMDAwMDAwMDAgKiAxMDAwMCkgJiAweGZmZmZmZmY7XG4gIGJbaSsrXSA9IHRtaCA+Pj4gOCAmIDB4ZmY7XG4gIGJbaSsrXSA9IHRtaCAmIDB4ZmY7XG5cbiAgLy8gYHRpbWVfaGlnaF9hbmRfdmVyc2lvbmBcbiAgYltpKytdID0gdG1oID4+PiAyNCAmIDB4ZiB8IDB4MTA7IC8vIGluY2x1ZGUgdmVyc2lvblxuICBiW2krK10gPSB0bWggPj4+IDE2ICYgMHhmZjtcblxuICAvLyBgY2xvY2tfc2VxX2hpX2FuZF9yZXNlcnZlZGAgKFBlciA0LjIuMiAtIGluY2x1ZGUgdmFyaWFudClcbiAgYltpKytdID0gY2xvY2tzZXEgPj4+IDggfCAweDgwO1xuXG4gIC8vIGBjbG9ja19zZXFfbG93YFxuICBiW2krK10gPSBjbG9ja3NlcSAmIDB4ZmY7XG5cbiAgLy8gYG5vZGVgXG4gIGZvciAodmFyIG4gPSAwOyBuIDwgNjsgKytuKSB7XG4gICAgYltpICsgbl0gPSBub2RlW25dO1xuICB9XG5cbiAgcmV0dXJuIGJ1ZiA/IGJ1ZiA6IGJ5dGVzVG9VdWlkKGIpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHYxO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vbm9kZV9tb2R1bGVzL3V1aWQvdjEuanNcbi8vIG1vZHVsZSBpZCA9IDZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///6\n");

/***/ }),
/* 7 */
/*!**********************************!*\
  !*** ../node_modules/uuid/v4.js ***!
  \**********************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

eval("var rng = __webpack_require__(/*! ./lib/rng */ 1);\nvar bytesToUuid = __webpack_require__(/*! ./lib/bytesToUuid */ 2);\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi9ub2RlX21vZHVsZXMvdXVpZC92NC5qcz84NTgxIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBybmcgPSByZXF1aXJlKCcuL2xpYi9ybmcnKTtcbnZhciBieXRlc1RvVXVpZCA9IHJlcXVpcmUoJy4vbGliL2J5dGVzVG9VdWlkJyk7XG5cbmZ1bmN0aW9uIHY0KG9wdGlvbnMsIGJ1Ziwgb2Zmc2V0KSB7XG4gIHZhciBpID0gYnVmICYmIG9mZnNldCB8fCAwO1xuXG4gIGlmICh0eXBlb2Yob3B0aW9ucykgPT0gJ3N0cmluZycpIHtcbiAgICBidWYgPSBvcHRpb25zID09PSAnYmluYXJ5JyA/IG5ldyBBcnJheSgxNikgOiBudWxsO1xuICAgIG9wdGlvbnMgPSBudWxsO1xuICB9XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gIHZhciBybmRzID0gb3B0aW9ucy5yYW5kb20gfHwgKG9wdGlvbnMucm5nIHx8IHJuZykoKTtcblxuICAvLyBQZXIgNC40LCBzZXQgYml0cyBmb3IgdmVyc2lvbiBhbmQgYGNsb2NrX3NlcV9oaV9hbmRfcmVzZXJ2ZWRgXG4gIHJuZHNbNl0gPSAocm5kc1s2XSAmIDB4MGYpIHwgMHg0MDtcbiAgcm5kc1s4XSA9IChybmRzWzhdICYgMHgzZikgfCAweDgwO1xuXG4gIC8vIENvcHkgYnl0ZXMgdG8gYnVmZmVyLCBpZiBwcm92aWRlZFxuICBpZiAoYnVmKSB7XG4gICAgZm9yICh2YXIgaWkgPSAwOyBpaSA8IDE2OyArK2lpKSB7XG4gICAgICBidWZbaSArIGlpXSA9IHJuZHNbaWldO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBidWYgfHwgYnl0ZXNUb1V1aWQocm5kcyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdjQ7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9ub2RlX21vZHVsZXMvdXVpZC92NC5qc1xuLy8gbW9kdWxlIGlkID0gN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///7\n");

/***/ }),
/* 8 */
/*!*********************************!*\
  !*** ./salte-auth.providers.js ***!
  \*********************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Providers = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _auth = __webpack_require__(/*! ./providers/auth0.js */ 9);\n\nvar _auth2 = _interopRequireDefault(_auth);\n\nvar _azure = __webpack_require__(/*! ./providers/azure.js */ 10);\n\nvar _azure2 = _interopRequireDefault(_azure);\n\nvar _cognito = __webpack_require__(/*! ./providers/cognito.js */ 11);\n\nvar _cognito2 = _interopRequireDefault(_cognito);\n\nvar _wso = __webpack_require__(/*! ./providers/wso2.js */ 12);\n\nvar _wso2 = _interopRequireDefault(_wso);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * A collection of overrides for specific Identity Providers\n */\nvar Providers = function () {\n  function Providers() {\n    _classCallCheck(this, Providers);\n  }\n\n  _createClass(Providers, null, [{\n    key: 'auth0',\n\n    /**\n     * Provider for Auth0\n     * @type {SalteAuthAuth0Provider}\n     */\n    get: function get() {\n      return _auth2.default;\n    }\n\n    /**\n     * Provider for Azure's Active Directory\n     * @type {SalteAuthAzureProvider}\n     */\n\n  }, {\n    key: 'azure',\n    get: function get() {\n      return _azure2.default;\n    }\n\n    /**\n     * Provider for Amazon's Cognito\n     * @type {SalteAuthCognitoProvider}\n     */\n\n  }, {\n    key: 'cognito',\n    get: function get() {\n      return _cognito2.default;\n    }\n\n    /**\n     * Provider for WSO2's API Gateway\n     * @type {SalteAuthWSO2Provider}\n     */\n\n  }, {\n    key: 'wso2',\n    get: function get() {\n      return _wso2.default;\n    }\n  }]);\n\n  return Providers;\n}();\n\n;\n\nexports.Providers = Providers;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvc2FsdGUtYXV0aC5wcm92aWRlcnMuanM/ZjNlZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYXV0aDAgZnJvbSAnLi9wcm92aWRlcnMvYXV0aDAuanMnO1xuaW1wb3J0IGF6dXJlIGZyb20gJy4vcHJvdmlkZXJzL2F6dXJlLmpzJztcbmltcG9ydCBjb2duaXRvIGZyb20gJy4vcHJvdmlkZXJzL2NvZ25pdG8uanMnO1xuaW1wb3J0IHdzbzIgZnJvbSAnLi9wcm92aWRlcnMvd3NvMi5qcyc7XG5cbi8qKlxuICogQSBjb2xsZWN0aW9uIG9mIG92ZXJyaWRlcyBmb3Igc3BlY2lmaWMgSWRlbnRpdHkgUHJvdmlkZXJzXG4gKi9cbmNsYXNzIFByb3ZpZGVycyB7XG4gIC8qKlxuICAgKiBQcm92aWRlciBmb3IgQXV0aDBcbiAgICogQHR5cGUge1NhbHRlQXV0aEF1dGgwUHJvdmlkZXJ9XG4gICAqL1xuICBzdGF0aWMgZ2V0IGF1dGgwKCkge1xuICAgIHJldHVybiBhdXRoMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBQcm92aWRlciBmb3IgQXp1cmUncyBBY3RpdmUgRGlyZWN0b3J5XG4gICAqIEB0eXBlIHtTYWx0ZUF1dGhBenVyZVByb3ZpZGVyfVxuICAgKi9cbiAgc3RhdGljIGdldCBhenVyZSgpIHtcbiAgICByZXR1cm4gYXp1cmU7XG4gIH1cblxuICAvKipcbiAgICogUHJvdmlkZXIgZm9yIEFtYXpvbidzIENvZ25pdG9cbiAgICogQHR5cGUge1NhbHRlQXV0aENvZ25pdG9Qcm92aWRlcn1cbiAgICovXG4gIHN0YXRpYyBnZXQgY29nbml0bygpIHtcbiAgICByZXR1cm4gY29nbml0bztcbiAgfVxuXG4gIC8qKlxuICAgKiBQcm92aWRlciBmb3IgV1NPMidzIEFQSSBHYXRld2F5XG4gICAqIEB0eXBlIHtTYWx0ZUF1dGhXU08yUHJvdmlkZXJ9XG4gICAqL1xuICBzdGF0aWMgZ2V0IHdzbzIoKSB7XG4gICAgcmV0dXJuIHdzbzI7XG4gIH1cbn07XG5cbmV4cG9ydCB7IFByb3ZpZGVycyB9O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9zYWx0ZS1hdXRoLnByb3ZpZGVycy5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7Ozs7OztBQUNBOzs7QUFHQTs7Ozs7Ozs7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7OztBQUlBO0FBQ0E7QUFDQTs7Ozs7O0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///8\n");

/***/ }),
/* 9 */
/*!****************************!*\
  !*** ./providers/auth0.js ***!
  \****************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Provider for Auth0\n * @see https://auth0.com\n */\nvar SalteAuthAuth0Provider = function () {\n  function SalteAuthAuth0Provider() {\n    _classCallCheck(this, SalteAuthAuth0Provider);\n  }\n\n  _createClass(SalteAuthAuth0Provider, null, [{\n    key: \"deauthorizeUrl\",\n\n    /**\n     * Computes the deauthorization url\n     * @param {Config} config configuration for salte auth\n     * @return {String} the deauthorization url\n     */\n    value: function deauthorizeUrl(config) {\n      return this.$utilities.createUrl(config.providerUrl + \"/v2/logout\", {\n        returnTo: config.redirectUrl,\n        client_id: config.clientId\n      });\n    }\n  }]);\n\n  return SalteAuthAuth0Provider;\n}();\n\nexports.default = SalteAuthAuth0Provider;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvcHJvdmlkZXJzL2F1dGgwLmpzPzhhY2MiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBQcm92aWRlciBmb3IgQXV0aDBcbiAqIEBzZWUgaHR0cHM6Ly9hdXRoMC5jb21cbiAqL1xuY2xhc3MgU2FsdGVBdXRoQXV0aDBQcm92aWRlciB7XG4gIC8qKlxuICAgKiBDb21wdXRlcyB0aGUgZGVhdXRob3JpemF0aW9uIHVybFxuICAgKiBAcGFyYW0ge0NvbmZpZ30gY29uZmlnIGNvbmZpZ3VyYXRpb24gZm9yIHNhbHRlIGF1dGhcbiAgICogQHJldHVybiB7U3RyaW5nfSB0aGUgZGVhdXRob3JpemF0aW9uIHVybFxuICAgKi9cbiAgc3RhdGljIGRlYXV0aG9yaXplVXJsKGNvbmZpZykge1xuICAgIHJldHVybiB0aGlzLiR1dGlsaXRpZXMuY3JlYXRlVXJsKGAke2NvbmZpZy5wcm92aWRlclVybH0vdjIvbG9nb3V0YCwge1xuICAgICAgcmV0dXJuVG86IGNvbmZpZy5yZWRpcmVjdFVybCxcbiAgICAgIGNsaWVudF9pZDogY29uZmlnLmNsaWVudElkXG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU2FsdGVBdXRoQXV0aDBQcm92aWRlcjtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvcHJvdmlkZXJzL2F1dGgwLmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7Ozs7QUFJQTs7Ozs7Ozs7QUFDQTs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7Ozs7OztBQUdBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///9\n");

/***/ }),
/* 10 */
/*!****************************!*\
  !*** ./providers/azure.js ***!
  \****************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/** Provider for Azure's Active Directory */\nvar SalteAuthAzureProvider = function () {\n  function SalteAuthAzureProvider() {\n    _classCallCheck(this, SalteAuthAzureProvider);\n  }\n\n  _createClass(SalteAuthAzureProvider, null, [{\n    key: \"authorizeEndpoint\",\n\n    /**\n     * Computes the authorization endpoint\n     * @param {Config} config configuration for salte auth\n     * @return {String} the authorization endpoint\n     */\n    value: function authorizeEndpoint(config) {\n      return config.providerUrl + \"/oauth2/authorize\";\n    }\n\n    /**\n     * Computes the deauthorization url\n     * @param {Config} config configuration for salte auth\n     * @return {String} the deauthorization url\n     */\n\n  }, {\n    key: \"deauthorizeUrl\",\n    value: function deauthorizeUrl(config) {\n      return this.$utilities.createUrl(config.providerUrl + \"/oauth2/logout\", {\n        post_logout_redirect_uri: config.redirectUrl\n      });\n    }\n  }]);\n\n  return SalteAuthAzureProvider;\n}();\n\nexports.default = SalteAuthAzureProvider;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL3Byb3ZpZGVycy9henVyZS5qcz83NDc1Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKiBQcm92aWRlciBmb3IgQXp1cmUncyBBY3RpdmUgRGlyZWN0b3J5ICovXG5jbGFzcyBTYWx0ZUF1dGhBenVyZVByb3ZpZGVyIHtcbiAgLyoqXG4gICAqIENvbXB1dGVzIHRoZSBhdXRob3JpemF0aW9uIGVuZHBvaW50XG4gICAqIEBwYXJhbSB7Q29uZmlnfSBjb25maWcgY29uZmlndXJhdGlvbiBmb3Igc2FsdGUgYXV0aFxuICAgKiBAcmV0dXJuIHtTdHJpbmd9IHRoZSBhdXRob3JpemF0aW9uIGVuZHBvaW50XG4gICAqL1xuICBzdGF0aWMgYXV0aG9yaXplRW5kcG9pbnQoY29uZmlnKSB7XG4gICAgcmV0dXJuIGAke2NvbmZpZy5wcm92aWRlclVybH0vb2F1dGgyL2F1dGhvcml6ZWA7XG4gIH1cblxuICAvKipcbiAgICogQ29tcHV0ZXMgdGhlIGRlYXV0aG9yaXphdGlvbiB1cmxcbiAgICogQHBhcmFtIHtDb25maWd9IGNvbmZpZyBjb25maWd1cmF0aW9uIGZvciBzYWx0ZSBhdXRoXG4gICAqIEByZXR1cm4ge1N0cmluZ30gdGhlIGRlYXV0aG9yaXphdGlvbiB1cmxcbiAgICovXG4gIHN0YXRpYyBkZWF1dGhvcml6ZVVybChjb25maWcpIHtcbiAgICByZXR1cm4gdGhpcy4kdXRpbGl0aWVzLmNyZWF0ZVVybChgJHtjb25maWcucHJvdmlkZXJVcmx9L29hdXRoMi9sb2dvdXRgLCB7XG4gICAgICBwb3N0X2xvZ291dF9yZWRpcmVjdF91cmk6IGNvbmZpZy5yZWRpcmVjdFVybFxuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNhbHRlQXV0aEF6dXJlUHJvdmlkZXI7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL3Byb3ZpZGVycy9henVyZS5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBO0FBQ0E7Ozs7Ozs7O0FBQ0E7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7Ozs7QUFHQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///10\n");

/***/ }),
/* 11 */
/*!******************************!*\
  !*** ./providers/cognito.js ***!
  \******************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/** Provider for Amazon's Cognito */\nvar SalteAuthCognitoProvider = function () {\n  function SalteAuthCognitoProvider() {\n    _classCallCheck(this, SalteAuthCognitoProvider);\n  }\n\n  _createClass(SalteAuthCognitoProvider, null, [{\n    key: \"authorizeEndpoint\",\n\n    /**\n     * Computes the authorization endpoint\n     * @param {Config} config configuration for salte auth\n     * @return {String} the authorization endpoint\n     */\n    value: function authorizeEndpoint(config) {\n      return config.providerUrl + \"/oauth2/authorize\";\n    }\n\n    /**\n     * Computes the deauthorization url\n     * @param {Config} config configuration for salte auth\n     * @return {String} the deauthorization url\n     */\n\n  }, {\n    key: \"deauthorizeUrl\",\n    value: function deauthorizeUrl(config) {\n      return this.$utilities.createUrl(config.providerUrl + \"/logout\", {\n        logout_uri: config.redirectUrl,\n        client_id: config.clientId\n      });\n    }\n\n    /**\n     * Provides a set of default config options required for cognito\n     */\n\n  }, {\n    key: \"defaultConfig\",\n    get: function get() {\n      return {\n        validation: {\n          // Amazon Cognito doesn't support nonce validation\n          nonce: false\n        }\n      };\n    }\n  }]);\n\n  return SalteAuthCognitoProvider;\n}();\n\nexports.default = SalteAuthCognitoProvider;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL3Byb3ZpZGVycy9jb2duaXRvLmpzPzAzMzMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqIFByb3ZpZGVyIGZvciBBbWF6b24ncyBDb2duaXRvICovXG5jbGFzcyBTYWx0ZUF1dGhDb2duaXRvUHJvdmlkZXIge1xuICAvKipcbiAgICogQ29tcHV0ZXMgdGhlIGF1dGhvcml6YXRpb24gZW5kcG9pbnRcbiAgICogQHBhcmFtIHtDb25maWd9IGNvbmZpZyBjb25maWd1cmF0aW9uIGZvciBzYWx0ZSBhdXRoXG4gICAqIEByZXR1cm4ge1N0cmluZ30gdGhlIGF1dGhvcml6YXRpb24gZW5kcG9pbnRcbiAgICovXG4gIHN0YXRpYyBhdXRob3JpemVFbmRwb2ludChjb25maWcpIHtcbiAgICByZXR1cm4gYCR7Y29uZmlnLnByb3ZpZGVyVXJsfS9vYXV0aDIvYXV0aG9yaXplYDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb21wdXRlcyB0aGUgZGVhdXRob3JpemF0aW9uIHVybFxuICAgKiBAcGFyYW0ge0NvbmZpZ30gY29uZmlnIGNvbmZpZ3VyYXRpb24gZm9yIHNhbHRlIGF1dGhcbiAgICogQHJldHVybiB7U3RyaW5nfSB0aGUgZGVhdXRob3JpemF0aW9uIHVybFxuICAgKi9cbiAgc3RhdGljIGRlYXV0aG9yaXplVXJsKGNvbmZpZykge1xuICAgIHJldHVybiB0aGlzLiR1dGlsaXRpZXMuY3JlYXRlVXJsKGAke2NvbmZpZy5wcm92aWRlclVybH0vbG9nb3V0YCwge1xuICAgICAgbG9nb3V0X3VyaTogY29uZmlnLnJlZGlyZWN0VXJsLFxuICAgICAgY2xpZW50X2lkOiBjb25maWcuY2xpZW50SWRcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQcm92aWRlcyBhIHNldCBvZiBkZWZhdWx0IGNvbmZpZyBvcHRpb25zIHJlcXVpcmVkIGZvciBjb2duaXRvXG4gICAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRDb25maWcoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbGlkYXRpb246IHtcbiAgICAgICAgLy8gQW1hem9uIENvZ25pdG8gZG9lc24ndCBzdXBwb3J0IG5vbmNlIHZhbGlkYXRpb25cbiAgICAgICAgbm9uY2U6IGZhbHNlXG4gICAgICB9XG4gICAgfTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBTYWx0ZUF1dGhDb2duaXRvUHJvdmlkZXI7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL3Byb3ZpZGVycy9jb2duaXRvLmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7QUFDQTs7Ozs7Ozs7QUFDQTs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7Ozs7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTUE7Ozs7OztBQUdBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///11\n");

/***/ }),
/* 12 */
/*!***************************!*\
  !*** ./providers/wso2.js ***!
  \***************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/** Provider for WSO2's API Gateway */\nvar SalteAuthWSO2Provider = function () {\n  function SalteAuthWSO2Provider() {\n    _classCallCheck(this, SalteAuthWSO2Provider);\n  }\n\n  _createClass(SalteAuthWSO2Provider, null, [{\n    key: 'deauthorizeUrl',\n\n    /**\n     * Computes the deauthorization url\n     * @param {Config} config configuration for salte auth\n     * @return {String} the deauthorization url\n     */\n    value: function deauthorizeUrl(config) {\n      return this.$utilities.createUrl(config.providerUrl + '/commonauth', {\n        commonAuthLogout: true,\n        type: 'oidc',\n        commonAuthCallerPath: config.redirectUrl,\n        relyingParty: config.relyingParty\n      });\n    }\n  }]);\n\n  return SalteAuthWSO2Provider;\n}();\n\nexports.default = SalteAuthWSO2Provider;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL3Byb3ZpZGVycy93c28yLmpzPzVmODEiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqIFByb3ZpZGVyIGZvciBXU08yJ3MgQVBJIEdhdGV3YXkgKi9cbmNsYXNzIFNhbHRlQXV0aFdTTzJQcm92aWRlciB7XG4gIC8qKlxuICAgKiBDb21wdXRlcyB0aGUgZGVhdXRob3JpemF0aW9uIHVybFxuICAgKiBAcGFyYW0ge0NvbmZpZ30gY29uZmlnIGNvbmZpZ3VyYXRpb24gZm9yIHNhbHRlIGF1dGhcbiAgICogQHJldHVybiB7U3RyaW5nfSB0aGUgZGVhdXRob3JpemF0aW9uIHVybFxuICAgKi9cbiAgc3RhdGljIGRlYXV0aG9yaXplVXJsKGNvbmZpZykge1xuICAgIHJldHVybiB0aGlzLiR1dGlsaXRpZXMuY3JlYXRlVXJsKGAke2NvbmZpZy5wcm92aWRlclVybH0vY29tbW9uYXV0aGAsIHtcbiAgICAgIGNvbW1vbkF1dGhMb2dvdXQ6IHRydWUsXG4gICAgICB0eXBlOiAnb2lkYycsXG4gICAgICBjb21tb25BdXRoQ2FsbGVyUGF0aDogY29uZmlnLnJlZGlyZWN0VXJsLFxuICAgICAgcmVseWluZ1BhcnR5OiBjb25maWcucmVseWluZ1BhcnR5XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU2FsdGVBdXRoV1NPMlByb3ZpZGVyO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9wcm92aWRlcnMvd3NvMi5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBO0FBQ0E7Ozs7Ozs7O0FBQ0E7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTs7Ozs7O0FBR0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///12\n");

/***/ }),
/* 13 */
/*!*******************************!*\
  !*** ./salte-auth.profile.js ***!
  \*******************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SalteAuthProfile = undefined;\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _lodash = __webpack_require__(/*! lodash */ 0);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * All the profile information associated with the current authentication session\n */\nvar SalteAuthProfile = function () {\n  /**\n   * Parses the current url for the authentication values\n   * @param {Config} config configuration for salte auth\n   */\n  function SalteAuthProfile(config) {\n    _classCallCheck(this, SalteAuthProfile);\n\n    if (window.salte.SalteAuthProfile.$instance) {\n      return window.salte.SalteAuthProfile.$instance;\n    }\n    /** @ignore */\n    this.$$config = (0, _lodash.defaultsDeep)(config, {\n      validation: {\n        nonce: true,\n        state: true,\n        azp: true,\n        aud: true\n      },\n      storageType: 'session'\n    });\n    if (location.hash) {\n      var params = location.hash.replace(/(#!?[^#]+)?#/, '').split('&');\n      for (var i = 0; i < params.length; i++) {\n        var param = params[i];\n\n        var _param$split = param.split('='),\n            _param$split2 = _slicedToArray(_param$split, 2),\n            key = _param$split2[0],\n            value = _param$split2[1];\n\n        this.$parse(key, decodeURIComponent(value));\n      }\n    }\n    window.salte.SalteAuthProfile.$instance = this;\n  }\n\n  /**\n   * Parse a key-value pair\n   * @param {String} key the key to parse\n   * @param {Object} value the matching value to parse\n   * @private\n   */\n\n\n  _createClass(SalteAuthProfile, [{\n    key: '$parse',\n    value: function $parse(key, value) {\n      switch (key) {\n        case 'token_type':\n          this.$tokenType = value;\n          break;\n        case 'expires_in':\n          this.$expiration = Date.now() + value;\n          break;\n        case 'access_token':\n          this.$accessToken = value;\n          break;\n        case 'id_token':\n          this.$idToken = value;\n          break;\n        case 'state':\n          this.$state = value;\n          break;\n        case 'error':\n          this.$error = value;\n          break;\n        case 'error_description':\n          this.$errorDescription = value;\n          break;\n      }\n    }\n\n    /**\n     * Whether the ID Token has expired\n     * @return {Boolean} true if the \"id_token\" has expired\n     */\n\n  }, {\n    key: '$validate',\n\n\n    /**\n     * Verifies that we were logged in successfully and that all security checks pass\n     * @param {Boolean} accessTokenRequest if the request we're validating was an access token request\n     * @return {Object} the error message\n     * @private\n     */\n    value: function $validate(accessTokenRequest) {\n      var _this = this;\n\n      if (!this.$$config.validation) {\n        return;\n      }\n\n      if (this.$error) {\n        return {\n          code: this.$error,\n          description: this.$errorDescription\n        };\n      }\n\n      if (!this.$idToken) {\n        return {\n          code: 'login_canceled',\n          description: 'User likely canceled the login or something unexpected occurred.'\n        };\n      }\n\n      if (this.$$config.validation.state && this.$localState !== this.$state) {\n        return {\n          code: 'invalid_state',\n          description: 'State provided by identity provider did not match local state.'\n        };\n      }\n\n      if (accessTokenRequest) return;\n\n      if (this.$$config.validation.nonce && this.$nonce !== this.userInfo.nonce) {\n        return {\n          code: 'invalid_nonce',\n          description: 'Nonce provided by identity provider did not match local nonce.'\n        };\n      }\n\n      if (Array.isArray(this.userInfo.aud)) {\n        if (this.$$config.validation.azp) {\n          if (!this.userInfo.azp) {\n            return {\n              code: 'invalid_azp',\n              description: 'Audience was returned as an array and AZP was not present on the ID Token.'\n            };\n          }\n\n          if (this.userInfo.azp !== this.$$config.clientId) {\n            return {\n              code: 'invalid_azp',\n              description: 'AZP does not match the Client ID.'\n            };\n          }\n        }\n\n        if (this.$$config.validation.aud) {\n          var aud = (0, _lodash.find)(this.userInfo.aud, function (audience) {\n            return audience === _this.$$config.clientId;\n          });\n\n          if (!aud) {\n            return {\n              code: 'invalid_aud',\n              description: 'None of the audience values matched the Client ID.'\n            };\n          }\n        }\n      } else if (this.$$config.validation.aud && this.userInfo.aud !== this.$$config.clientId) {\n        return {\n          code: 'invalid_aud',\n          description: 'The audience did not match the Client ID.'\n        };\n      }\n    }\n\n    /**\n     * Saves a value to the Web Storage API\n     * @param {String} key The key to save to\n     * @param {*} value The value to save, if this is undefined or null it will delete the key\n     * @private\n     */\n\n  }, {\n    key: '$saveItem',\n    value: function $saveItem(key, value) {\n      if ([undefined, null].indexOf(value) !== -1) {\n        this.$storage.removeItem(key);\n      } else {\n        this.$storage.setItem(key, value);\n      }\n    }\n\n    /**\n     * Return the active Web Storage API\n     * @return {Storage} the storage api to save and pull values from\n     * @private\n     */\n\n  }, {\n    key: '$$getStorage',\n\n\n    /**\n     * Determines which Web Storage API to return using the name provided\n     * @param {String} storageType the name of the storageType to use\n     * @return {Storage} the web storage api that matches the given string\n     * @ignore\n     */\n    value: function $$getStorage(storageType) {\n      if (storageType === 'local') {\n        return localStorage;\n      } else if (storageType === 'session') {\n        return sessionStorage;\n      } else {\n        throw new ReferenceError('Unknown Storage Type (' + storageType + ')');\n      }\n    }\n\n    /**\n     * Transfers values from one storage type to the other\n     * @param {String} source the name of the storage type to pull from\n     * @param {String} destination the name of the storage type to push to\n     * @ignore\n     */\n\n  }, {\n    key: '$$transfer',\n    value: function $$transfer(source, destination) {\n      var sourceStorage = this.$$getStorage(source);\n      var destinationStorage = this.$$getStorage(destination);\n\n      for (var key in sourceStorage) {\n        if (key.indexOf('salte.auth.') !== 0) continue;\n\n        destinationStorage.setItem(key, sourceStorage.getItem(key));\n        sourceStorage.removeItem(key);\n      }\n    }\n\n    /**\n     * Clears all `salte.auth` values from localStorage\n     * @private\n     */\n\n  }, {\n    key: '$clear',\n    value: function $clear() {\n      for (var key in this.$storage) {\n        if (key.match(/^salte\\.auth\\.[^$]/)) {\n          this.$saveItem(key, undefined);\n        }\n      }\n    }\n\n    /**\n     * Clears all `salte.auth` error values from localStorage\n     * @private\n     */\n\n  }, {\n    key: '$clearErrors',\n    value: function $clearErrors() {\n      this.$error = undefined;\n      this.$errorDescription = undefined;\n    }\n  }, {\n    key: 'idTokenExpired',\n    get: function get() {\n      return !this.$idToken || Date.now() >= this.userInfo.exp * 1000;\n    }\n\n    /**\n     * Whether the Access Token has expired\n     * @return {Boolean} true if the \"access_token\" has expired\n     */\n\n  }, {\n    key: 'accessTokenExpired',\n    get: function get() {\n      return !this.$accessToken || Date.now() >= this.$expiration;\n    }\n\n    /**\n     * The type of Access Token that was returned by the identity provider\n     * @return {String} the type of access token\n     * @private\n     */\n\n  }, {\n    key: '$tokenType',\n    get: function get() {\n      return this.$storage.getItem('salte.auth.token-type');\n    },\n    set: function set(tokenType) {\n      this.$saveItem('salte.auth.token-type', tokenType);\n    }\n\n    /**\n     * The date and time that the access token will expire\n     * @return {String} the expiration time as unix timestamp\n     * @private\n     */\n\n  }, {\n    key: '$expiration',\n    get: function get() {\n      return this.$storage.getItem('salte.auth.expiration');\n    },\n    set: function set(expiration) {\n      this.$saveItem('salte.auth.expiration', expiration);\n    }\n\n    /**\n     * The Access Token returned by the identity provider\n     * @return {String} the access token\n     * @private\n     */\n\n  }, {\n    key: '$accessToken',\n    get: function get() {\n      return this.$storage.getItem('salte.auth.access-token');\n    },\n    set: function set(accessToken) {\n      this.$saveItem('salte.auth.access-token', accessToken);\n    }\n\n    /**\n     * The ID Token returned by the identity provider\n     * @return {String} the id token\n     * @private\n     */\n\n  }, {\n    key: '$idToken',\n    get: function get() {\n      return this.$storage.getItem('salte.auth.id-token');\n    },\n    set: function set(idToken) {\n      this.$saveItem('salte.auth.id-token', idToken);\n    }\n\n    /**\n     * The authentication state returned by the identity provider\n     * @return {String} the state value\n     * @private\n     *\n     * @see https://tools.ietf.org/html/rfc6749#section-4.1.1\n     */\n\n  }, {\n    key: '$state',\n    get: function get() {\n      return this.$storage.getItem('salte.auth.state');\n    },\n    set: function set(state) {\n      this.$saveItem('salte.auth.state', state);\n    }\n\n    /**\n     * The locally generate authentication state\n     * @return {String} the local state value\n     * @private\n     *\n     * @see https://tools.ietf.org/html/rfc6749#section-4.1.1\n     */\n\n  }, {\n    key: '$localState',\n    get: function get() {\n      return this.$storage.getItem('salte.auth.local-state');\n    },\n    set: function set(localState) {\n      this.$saveItem('salte.auth.local-state', localState);\n    }\n\n    /**\n     * The error returned by the identity provider\n     * @return {String} the state value\n     * @private\n     */\n\n  }, {\n    key: '$error',\n    get: function get() {\n      return this.$storage.getItem('salte.auth.error');\n    },\n    set: function set(error) {\n      this.$saveItem('salte.auth.error', error);\n    }\n\n    /**\n     * The error description returned by the identity provider\n     * @return {String} a string that describes the error that occurred\n     * @private\n     */\n\n  }, {\n    key: '$errorDescription',\n    get: function get() {\n      return this.$storage.getItem('salte.auth.error-description');\n    },\n    set: function set(errorDescription) {\n      this.$saveItem('salte.auth.error-description', errorDescription);\n    }\n\n    /**\n     * The url the user originated from before authentication occurred\n     * @return {String} The url the user originated from before authentication occurred\n     * @private\n     */\n\n  }, {\n    key: '$redirectUrl',\n    get: function get() {\n      return this.$storage.getItem('salte.auth.$redirect-url');\n    },\n    set: function set(redirectUrl) {\n      this.$saveItem('salte.auth.$redirect-url', redirectUrl);\n    }\n\n    /**\n     * Parses the User Info from the ID Token\n     * @return {String} The User Info from the ID Token\n     * @private\n     */\n\n  }, {\n    key: '$nonce',\n    get: function get() {\n      return this.$storage.getItem('salte.auth.nonce');\n    },\n    set: function set(nonce) {\n      this.$saveItem('salte.auth.nonce', nonce);\n    }\n\n    /**\n     * Parses the User Info from the ID Token\n     * @return {Object} The User Info from the ID Token\n     */\n\n  }, {\n    key: 'userInfo',\n    get: function get() {\n      if (this.$idToken) {\n        var separatedToken = this.$idToken.split('.');\n        if (separatedToken.length === 3) {\n          return JSON.parse(atob(separatedToken[1]));\n        }\n      }\n      return null;\n    }\n  }, {\n    key: '$storage',\n    get: function get() {\n      return this.$$getStorage(this.$$config.storageType);\n    }\n  }]);\n\n  return SalteAuthProfile;\n}();\n\n(0, _lodash.set)(window, 'salte.SalteAuthProfile', (0, _lodash.get)(window, 'salte.SalteAuthProfile', SalteAuthProfile));\nexports.SalteAuthProfile = SalteAuthProfile;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL3NhbHRlLWF1dGgucHJvZmlsZS5qcz9kNDlkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRlZmF1bHRzRGVlcCwgZmluZCwgZ2V0LCBzZXQgfSBmcm9tICdsb2Rhc2gnO1xuXG4vKipcbiAqIEFsbCB0aGUgcHJvZmlsZSBpbmZvcm1hdGlvbiBhc3NvY2lhdGVkIHdpdGggdGhlIGN1cnJlbnQgYXV0aGVudGljYXRpb24gc2Vzc2lvblxuICovXG5jbGFzcyBTYWx0ZUF1dGhQcm9maWxlIHtcbiAgLyoqXG4gICAqIFBhcnNlcyB0aGUgY3VycmVudCB1cmwgZm9yIHRoZSBhdXRoZW50aWNhdGlvbiB2YWx1ZXNcbiAgICogQHBhcmFtIHtDb25maWd9IGNvbmZpZyBjb25maWd1cmF0aW9uIGZvciBzYWx0ZSBhdXRoXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICBpZiAod2luZG93LnNhbHRlLlNhbHRlQXV0aFByb2ZpbGUuJGluc3RhbmNlKSB7XG4gICAgICByZXR1cm4gd2luZG93LnNhbHRlLlNhbHRlQXV0aFByb2ZpbGUuJGluc3RhbmNlO1xuICAgIH1cbiAgICAvKiogQGlnbm9yZSAqL1xuICAgIHRoaXMuJCRjb25maWcgPSBkZWZhdWx0c0RlZXAoY29uZmlnLCB7XG4gICAgICB2YWxpZGF0aW9uOiB7XG4gICAgICAgIG5vbmNlOiB0cnVlLFxuICAgICAgICBzdGF0ZTogdHJ1ZSxcbiAgICAgICAgYXpwOiB0cnVlLFxuICAgICAgICBhdWQ6IHRydWVcbiAgICAgIH0sXG4gICAgICBzdG9yYWdlVHlwZTogJ3Nlc3Npb24nXG4gICAgfSk7XG4gICAgaWYgKGxvY2F0aW9uLmhhc2gpIHtcbiAgICAgIGNvbnN0IHBhcmFtcyA9IGxvY2F0aW9uLmhhc2gucmVwbGFjZSgvKCMhP1teI10rKT8jLywgJycpLnNwbGl0KCcmJyk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcmFtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBwYXJhbSA9IHBhcmFtc1tpXTtcbiAgICAgICAgY29uc3QgW2tleSwgdmFsdWVdID0gcGFyYW0uc3BsaXQoJz0nKTtcbiAgICAgICAgdGhpcy4kcGFyc2Uoa2V5LCBkZWNvZGVVUklDb21wb25lbnQodmFsdWUpKTtcbiAgICAgIH1cbiAgICB9XG4gICAgd2luZG93LnNhbHRlLlNhbHRlQXV0aFByb2ZpbGUuJGluc3RhbmNlID0gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZSBhIGtleS12YWx1ZSBwYWlyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBrZXkgdGhlIGtleSB0byBwYXJzZVxuICAgKiBAcGFyYW0ge09iamVjdH0gdmFsdWUgdGhlIG1hdGNoaW5nIHZhbHVlIHRvIHBhcnNlXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICAkcGFyc2Uoa2V5LCB2YWx1ZSkge1xuICAgIHN3aXRjaCAoa2V5KSB7XG4gICAgICBjYXNlICd0b2tlbl90eXBlJzpcbiAgICAgICAgdGhpcy4kdG9rZW5UeXBlID0gdmFsdWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZXhwaXJlc19pbic6XG4gICAgICAgIHRoaXMuJGV4cGlyYXRpb24gPSBEYXRlLm5vdygpICsgdmFsdWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnYWNjZXNzX3Rva2VuJzpcbiAgICAgICAgdGhpcy4kYWNjZXNzVG9rZW4gPSB2YWx1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdpZF90b2tlbic6XG4gICAgICAgIHRoaXMuJGlkVG9rZW4gPSB2YWx1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdzdGF0ZSc6XG4gICAgICAgIHRoaXMuJHN0YXRlID0gdmFsdWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZXJyb3InOlxuICAgICAgICB0aGlzLiRlcnJvciA9IHZhbHVlO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2Vycm9yX2Rlc2NyaXB0aW9uJzpcbiAgICAgICAgdGhpcy4kZXJyb3JEZXNjcmlwdGlvbiA9IHZhbHVlO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogV2hldGhlciB0aGUgSUQgVG9rZW4gaGFzIGV4cGlyZWRcbiAgICogQHJldHVybiB7Qm9vbGVhbn0gdHJ1ZSBpZiB0aGUgXCJpZF90b2tlblwiIGhhcyBleHBpcmVkXG4gICAqL1xuICBnZXQgaWRUb2tlbkV4cGlyZWQoKSB7XG4gICAgcmV0dXJuICF0aGlzLiRpZFRva2VuIHx8IERhdGUubm93KCkgPj0gKHRoaXMudXNlckluZm8uZXhwICogMTAwMCk7XG4gIH1cblxuICAvKipcbiAgICogV2hldGhlciB0aGUgQWNjZXNzIFRva2VuIGhhcyBleHBpcmVkXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWUgaWYgdGhlIFwiYWNjZXNzX3Rva2VuXCIgaGFzIGV4cGlyZWRcbiAgICovXG4gIGdldCBhY2Nlc3NUb2tlbkV4cGlyZWQoKSB7XG4gICAgcmV0dXJuICF0aGlzLiRhY2Nlc3NUb2tlbiB8fCBEYXRlLm5vdygpID49IHRoaXMuJGV4cGlyYXRpb247XG4gIH1cblxuICAvKipcbiAgICogVGhlIHR5cGUgb2YgQWNjZXNzIFRva2VuIHRoYXQgd2FzIHJldHVybmVkIGJ5IHRoZSBpZGVudGl0eSBwcm92aWRlclxuICAgKiBAcmV0dXJuIHtTdHJpbmd9IHRoZSB0eXBlIG9mIGFjY2VzcyB0b2tlblxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZ2V0ICR0b2tlblR5cGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuJHN0b3JhZ2UuZ2V0SXRlbSgnc2FsdGUuYXV0aC50b2tlbi10eXBlJyk7XG4gIH1cblxuICBzZXQgJHRva2VuVHlwZSh0b2tlblR5cGUpIHtcbiAgICB0aGlzLiRzYXZlSXRlbSgnc2FsdGUuYXV0aC50b2tlbi10eXBlJywgdG9rZW5UeXBlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgZGF0ZSBhbmQgdGltZSB0aGF0IHRoZSBhY2Nlc3MgdG9rZW4gd2lsbCBleHBpcmVcbiAgICogQHJldHVybiB7U3RyaW5nfSB0aGUgZXhwaXJhdGlvbiB0aW1lIGFzIHVuaXggdGltZXN0YW1wXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBnZXQgJGV4cGlyYXRpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuJHN0b3JhZ2UuZ2V0SXRlbSgnc2FsdGUuYXV0aC5leHBpcmF0aW9uJyk7XG4gIH1cblxuICBzZXQgJGV4cGlyYXRpb24oZXhwaXJhdGlvbikge1xuICAgIHRoaXMuJHNhdmVJdGVtKCdzYWx0ZS5hdXRoLmV4cGlyYXRpb24nLCBleHBpcmF0aW9uKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgQWNjZXNzIFRva2VuIHJldHVybmVkIGJ5IHRoZSBpZGVudGl0eSBwcm92aWRlclxuICAgKiBAcmV0dXJuIHtTdHJpbmd9IHRoZSBhY2Nlc3MgdG9rZW5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldCAkYWNjZXNzVG9rZW4oKSB7XG4gICAgcmV0dXJuIHRoaXMuJHN0b3JhZ2UuZ2V0SXRlbSgnc2FsdGUuYXV0aC5hY2Nlc3MtdG9rZW4nKTtcbiAgfVxuXG4gIHNldCAkYWNjZXNzVG9rZW4oYWNjZXNzVG9rZW4pIHtcbiAgICB0aGlzLiRzYXZlSXRlbSgnc2FsdGUuYXV0aC5hY2Nlc3MtdG9rZW4nLCBhY2Nlc3NUb2tlbik7XG4gIH1cblxuICAvKipcbiAgICogVGhlIElEIFRva2VuIHJldHVybmVkIGJ5IHRoZSBpZGVudGl0eSBwcm92aWRlclxuICAgKiBAcmV0dXJuIHtTdHJpbmd9IHRoZSBpZCB0b2tlblxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZ2V0ICRpZFRva2VuKCkge1xuICAgIHJldHVybiB0aGlzLiRzdG9yYWdlLmdldEl0ZW0oJ3NhbHRlLmF1dGguaWQtdG9rZW4nKTtcbiAgfVxuXG4gIHNldCAkaWRUb2tlbihpZFRva2VuKSB7XG4gICAgdGhpcy4kc2F2ZUl0ZW0oJ3NhbHRlLmF1dGguaWQtdG9rZW4nLCBpZFRva2VuKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgYXV0aGVudGljYXRpb24gc3RhdGUgcmV0dXJuZWQgYnkgdGhlIGlkZW50aXR5IHByb3ZpZGVyXG4gICAqIEByZXR1cm4ge1N0cmluZ30gdGhlIHN0YXRlIHZhbHVlXG4gICAqIEBwcml2YXRlXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzY3NDkjc2VjdGlvbi00LjEuMVxuICAgKi9cbiAgZ2V0ICRzdGF0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy4kc3RvcmFnZS5nZXRJdGVtKCdzYWx0ZS5hdXRoLnN0YXRlJyk7XG4gIH1cblxuICBzZXQgJHN0YXRlKHN0YXRlKSB7XG4gICAgdGhpcy4kc2F2ZUl0ZW0oJ3NhbHRlLmF1dGguc3RhdGUnLCBzdGF0ZSk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGxvY2FsbHkgZ2VuZXJhdGUgYXV0aGVudGljYXRpb24gc3RhdGVcbiAgICogQHJldHVybiB7U3RyaW5nfSB0aGUgbG9jYWwgc3RhdGUgdmFsdWVcbiAgICogQHByaXZhdGVcbiAgICpcbiAgICogQHNlZSBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNjc0OSNzZWN0aW9uLTQuMS4xXG4gICAqL1xuICBnZXQgJGxvY2FsU3RhdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuJHN0b3JhZ2UuZ2V0SXRlbSgnc2FsdGUuYXV0aC5sb2NhbC1zdGF0ZScpO1xuICB9XG5cbiAgc2V0ICRsb2NhbFN0YXRlKGxvY2FsU3RhdGUpIHtcbiAgICB0aGlzLiRzYXZlSXRlbSgnc2FsdGUuYXV0aC5sb2NhbC1zdGF0ZScsIGxvY2FsU3RhdGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBlcnJvciByZXR1cm5lZCBieSB0aGUgaWRlbnRpdHkgcHJvdmlkZXJcbiAgICogQHJldHVybiB7U3RyaW5nfSB0aGUgc3RhdGUgdmFsdWVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldCAkZXJyb3IoKSB7XG4gICAgcmV0dXJuIHRoaXMuJHN0b3JhZ2UuZ2V0SXRlbSgnc2FsdGUuYXV0aC5lcnJvcicpO1xuICB9XG5cbiAgc2V0ICRlcnJvcihlcnJvcikge1xuICAgIHRoaXMuJHNhdmVJdGVtKCdzYWx0ZS5hdXRoLmVycm9yJywgZXJyb3IpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBlcnJvciBkZXNjcmlwdGlvbiByZXR1cm5lZCBieSB0aGUgaWRlbnRpdHkgcHJvdmlkZXJcbiAgICogQHJldHVybiB7U3RyaW5nfSBhIHN0cmluZyB0aGF0IGRlc2NyaWJlcyB0aGUgZXJyb3IgdGhhdCBvY2N1cnJlZFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZ2V0ICRlcnJvckRlc2NyaXB0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLiRzdG9yYWdlLmdldEl0ZW0oJ3NhbHRlLmF1dGguZXJyb3ItZGVzY3JpcHRpb24nKTtcbiAgfVxuXG4gIHNldCAkZXJyb3JEZXNjcmlwdGlvbihlcnJvckRlc2NyaXB0aW9uKSB7XG4gICAgdGhpcy4kc2F2ZUl0ZW0oJ3NhbHRlLmF1dGguZXJyb3ItZGVzY3JpcHRpb24nLCBlcnJvckRlc2NyaXB0aW9uKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgdXJsIHRoZSB1c2VyIG9yaWdpbmF0ZWQgZnJvbSBiZWZvcmUgYXV0aGVudGljYXRpb24gb2NjdXJyZWRcbiAgICogQHJldHVybiB7U3RyaW5nfSBUaGUgdXJsIHRoZSB1c2VyIG9yaWdpbmF0ZWQgZnJvbSBiZWZvcmUgYXV0aGVudGljYXRpb24gb2NjdXJyZWRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldCAkcmVkaXJlY3RVcmwoKSB7XG4gICAgcmV0dXJuIHRoaXMuJHN0b3JhZ2UuZ2V0SXRlbSgnc2FsdGUuYXV0aC4kcmVkaXJlY3QtdXJsJyk7XG4gIH1cblxuICBzZXQgJHJlZGlyZWN0VXJsKHJlZGlyZWN0VXJsKSB7XG4gICAgdGhpcy4kc2F2ZUl0ZW0oJ3NhbHRlLmF1dGguJHJlZGlyZWN0LXVybCcsIHJlZGlyZWN0VXJsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZXMgdGhlIFVzZXIgSW5mbyBmcm9tIHRoZSBJRCBUb2tlblxuICAgKiBAcmV0dXJuIHtTdHJpbmd9IFRoZSBVc2VyIEluZm8gZnJvbSB0aGUgSUQgVG9rZW5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldCAkbm9uY2UoKSB7XG4gICAgcmV0dXJuIHRoaXMuJHN0b3JhZ2UuZ2V0SXRlbSgnc2FsdGUuYXV0aC5ub25jZScpO1xuICB9XG5cbiAgc2V0ICRub25jZShub25jZSkge1xuICAgIHRoaXMuJHNhdmVJdGVtKCdzYWx0ZS5hdXRoLm5vbmNlJywgbm9uY2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlcyB0aGUgVXNlciBJbmZvIGZyb20gdGhlIElEIFRva2VuXG4gICAqIEByZXR1cm4ge09iamVjdH0gVGhlIFVzZXIgSW5mbyBmcm9tIHRoZSBJRCBUb2tlblxuICAgKi9cbiAgZ2V0IHVzZXJJbmZvKCkge1xuICAgIGlmICh0aGlzLiRpZFRva2VuKSB7XG4gICAgICBjb25zdCBzZXBhcmF0ZWRUb2tlbiA9IHRoaXMuJGlkVG9rZW4uc3BsaXQoJy4nKTtcbiAgICAgIGlmIChzZXBhcmF0ZWRUb2tlbi5sZW5ndGggPT09IDMpIHtcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoYXRvYihzZXBhcmF0ZWRUb2tlblsxXSkpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmllcyB0aGF0IHdlIHdlcmUgbG9nZ2VkIGluIHN1Y2Nlc3NmdWxseSBhbmQgdGhhdCBhbGwgc2VjdXJpdHkgY2hlY2tzIHBhc3NcbiAgICogQHBhcmFtIHtCb29sZWFufSBhY2Nlc3NUb2tlblJlcXVlc3QgaWYgdGhlIHJlcXVlc3Qgd2UncmUgdmFsaWRhdGluZyB3YXMgYW4gYWNjZXNzIHRva2VuIHJlcXVlc3RcbiAgICogQHJldHVybiB7T2JqZWN0fSB0aGUgZXJyb3IgbWVzc2FnZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgJHZhbGlkYXRlKGFjY2Vzc1Rva2VuUmVxdWVzdCkge1xuICAgIGlmICghdGhpcy4kJGNvbmZpZy52YWxpZGF0aW9uKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuJGVycm9yKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBjb2RlOiB0aGlzLiRlcnJvcixcbiAgICAgICAgZGVzY3JpcHRpb246IHRoaXMuJGVycm9yRGVzY3JpcHRpb25cbiAgICAgIH07XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLiRpZFRva2VuKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBjb2RlOiAnbG9naW5fY2FuY2VsZWQnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ1VzZXIgbGlrZWx5IGNhbmNlbGVkIHRoZSBsb2dpbiBvciBzb21ldGhpbmcgdW5leHBlY3RlZCBvY2N1cnJlZC4nXG4gICAgICB9O1xuICAgIH1cblxuICAgIGlmICh0aGlzLiQkY29uZmlnLnZhbGlkYXRpb24uc3RhdGUgJiYgdGhpcy4kbG9jYWxTdGF0ZSAhPT0gdGhpcy4kc3RhdGUpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGNvZGU6ICdpbnZhbGlkX3N0YXRlJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdTdGF0ZSBwcm92aWRlZCBieSBpZGVudGl0eSBwcm92aWRlciBkaWQgbm90IG1hdGNoIGxvY2FsIHN0YXRlLidcbiAgICAgIH07XG4gICAgfVxuXG4gICAgaWYgKGFjY2Vzc1Rva2VuUmVxdWVzdCkgcmV0dXJuO1xuXG4gICAgaWYgKHRoaXMuJCRjb25maWcudmFsaWRhdGlvbi5ub25jZSAmJiB0aGlzLiRub25jZSAhPT0gdGhpcy51c2VySW5mby5ub25jZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY29kZTogJ2ludmFsaWRfbm9uY2UnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ05vbmNlIHByb3ZpZGVkIGJ5IGlkZW50aXR5IHByb3ZpZGVyIGRpZCBub3QgbWF0Y2ggbG9jYWwgbm9uY2UuJ1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheSh0aGlzLnVzZXJJbmZvLmF1ZCkpIHtcbiAgICAgIGlmICh0aGlzLiQkY29uZmlnLnZhbGlkYXRpb24uYXpwKSB7XG4gICAgICAgIGlmICghdGhpcy51c2VySW5mby5henApIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY29kZTogJ2ludmFsaWRfYXpwJyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQXVkaWVuY2Ugd2FzIHJldHVybmVkIGFzIGFuIGFycmF5IGFuZCBBWlAgd2FzIG5vdCBwcmVzZW50IG9uIHRoZSBJRCBUb2tlbi4nXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnVzZXJJbmZvLmF6cCAhPT0gdGhpcy4kJGNvbmZpZy5jbGllbnRJZCkge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjb2RlOiAnaW52YWxpZF9henAnLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICdBWlAgZG9lcyBub3QgbWF0Y2ggdGhlIENsaWVudCBJRC4nXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuXG5cbiAgICAgIGlmICh0aGlzLiQkY29uZmlnLnZhbGlkYXRpb24uYXVkKSB7XG4gICAgICAgIGNvbnN0IGF1ZCA9IGZpbmQodGhpcy51c2VySW5mby5hdWQsIChhdWRpZW5jZSkgPT4ge1xuICAgICAgICAgIHJldHVybiBhdWRpZW5jZSA9PT0gdGhpcy4kJGNvbmZpZy5jbGllbnRJZDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCFhdWQpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY29kZTogJ2ludmFsaWRfYXVkJyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnTm9uZSBvZiB0aGUgYXVkaWVuY2UgdmFsdWVzIG1hdGNoZWQgdGhlIENsaWVudCBJRC4nXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy4kJGNvbmZpZy52YWxpZGF0aW9uLmF1ZCAmJiB0aGlzLnVzZXJJbmZvLmF1ZCAhPT0gdGhpcy4kJGNvbmZpZy5jbGllbnRJZCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY29kZTogJ2ludmFsaWRfYXVkJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdUaGUgYXVkaWVuY2UgZGlkIG5vdCBtYXRjaCB0aGUgQ2xpZW50IElELidcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNhdmVzIGEgdmFsdWUgdG8gdGhlIFdlYiBTdG9yYWdlIEFQSVxuICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5IFRoZSBrZXkgdG8gc2F2ZSB0b1xuICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzYXZlLCBpZiB0aGlzIGlzIHVuZGVmaW5lZCBvciBudWxsIGl0IHdpbGwgZGVsZXRlIHRoZSBrZXlcbiAgICogQHByaXZhdGVcbiAgICovXG4gICRzYXZlSXRlbShrZXksIHZhbHVlKSB7XG4gICAgaWYgKFt1bmRlZmluZWQsIG51bGxdLmluZGV4T2YodmFsdWUpICE9PSAtMSkge1xuICAgICAgdGhpcy4kc3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuJHN0b3JhZ2Uuc2V0SXRlbShrZXksIHZhbHVlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBhY3RpdmUgV2ViIFN0b3JhZ2UgQVBJXG4gICAqIEByZXR1cm4ge1N0b3JhZ2V9IHRoZSBzdG9yYWdlIGFwaSB0byBzYXZlIGFuZCBwdWxsIHZhbHVlcyBmcm9tXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBnZXQgJHN0b3JhZ2UoKSB7XG4gICAgcmV0dXJuIHRoaXMuJCRnZXRTdG9yYWdlKHRoaXMuJCRjb25maWcuc3RvcmFnZVR5cGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIERldGVybWluZXMgd2hpY2ggV2ViIFN0b3JhZ2UgQVBJIHRvIHJldHVybiB1c2luZyB0aGUgbmFtZSBwcm92aWRlZFxuICAgKiBAcGFyYW0ge1N0cmluZ30gc3RvcmFnZVR5cGUgdGhlIG5hbWUgb2YgdGhlIHN0b3JhZ2VUeXBlIHRvIHVzZVxuICAgKiBAcmV0dXJuIHtTdG9yYWdlfSB0aGUgd2ViIHN0b3JhZ2UgYXBpIHRoYXQgbWF0Y2hlcyB0aGUgZ2l2ZW4gc3RyaW5nXG4gICAqIEBpZ25vcmVcbiAgICovXG4gICQkZ2V0U3RvcmFnZShzdG9yYWdlVHlwZSkge1xuICAgIGlmIChzdG9yYWdlVHlwZSA9PT0gJ2xvY2FsJykge1xuICAgICAgcmV0dXJuIGxvY2FsU3RvcmFnZTtcbiAgICB9IGVsc2UgaWYgKHN0b3JhZ2VUeXBlID09PSAnc2Vzc2lvbicpIHtcbiAgICAgIHJldHVybiBzZXNzaW9uU3RvcmFnZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKGBVbmtub3duIFN0b3JhZ2UgVHlwZSAoJHtzdG9yYWdlVHlwZX0pYCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRyYW5zZmVycyB2YWx1ZXMgZnJvbSBvbmUgc3RvcmFnZSB0eXBlIHRvIHRoZSBvdGhlclxuICAgKiBAcGFyYW0ge1N0cmluZ30gc291cmNlIHRoZSBuYW1lIG9mIHRoZSBzdG9yYWdlIHR5cGUgdG8gcHVsbCBmcm9tXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBkZXN0aW5hdGlvbiB0aGUgbmFtZSBvZiB0aGUgc3RvcmFnZSB0eXBlIHRvIHB1c2ggdG9cbiAgICogQGlnbm9yZVxuICAgKi9cbiAgJCR0cmFuc2Zlcihzb3VyY2UsIGRlc3RpbmF0aW9uKSB7XG4gICAgY29uc3Qgc291cmNlU3RvcmFnZSA9IHRoaXMuJCRnZXRTdG9yYWdlKHNvdXJjZSk7XG4gICAgY29uc3QgZGVzdGluYXRpb25TdG9yYWdlID0gdGhpcy4kJGdldFN0b3JhZ2UoZGVzdGluYXRpb24pO1xuXG4gICAgZm9yIChjb25zdCBrZXkgaW4gc291cmNlU3RvcmFnZSkge1xuICAgICAgaWYgKGtleS5pbmRleE9mKCdzYWx0ZS5hdXRoLicpICE9PSAwKSBjb250aW51ZTtcblxuICAgICAgZGVzdGluYXRpb25TdG9yYWdlLnNldEl0ZW0oa2V5LCBzb3VyY2VTdG9yYWdlLmdldEl0ZW0oa2V5KSk7XG4gICAgICBzb3VyY2VTdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXJzIGFsbCBgc2FsdGUuYXV0aGAgdmFsdWVzIGZyb20gbG9jYWxTdG9yYWdlXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICAkY2xlYXIoKSB7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy4kc3RvcmFnZSkge1xuICAgICAgaWYgKGtleS5tYXRjaCgvXnNhbHRlXFwuYXV0aFxcLlteJF0vKSkge1xuICAgICAgICB0aGlzLiRzYXZlSXRlbShrZXksIHVuZGVmaW5lZCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENsZWFycyBhbGwgYHNhbHRlLmF1dGhgIGVycm9yIHZhbHVlcyBmcm9tIGxvY2FsU3RvcmFnZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgJGNsZWFyRXJyb3JzKCkge1xuICAgIHRoaXMuJGVycm9yID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuJGVycm9yRGVzY3JpcHRpb24gPSB1bmRlZmluZWQ7XG4gIH1cbn1cblxuc2V0KHdpbmRvdywgJ3NhbHRlLlNhbHRlQXV0aFByb2ZpbGUnLCBnZXQod2luZG93LCAnc2FsdGUuU2FsdGVBdXRoUHJvZmlsZScsIFNhbHRlQXV0aFByb2ZpbGUpKTtcbmV4cG9ydCB7IFNhbHRlQXV0aFByb2ZpbGUgfTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvc2FsdGUtYXV0aC5wcm9maWxlLmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBO0FBQ0E7OztBQUNBOzs7QUFHQTtBQUNBOzs7O0FBSUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBUEE7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7O0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXJCQTtBQXVCQTtBQUNBO0FBQ0E7Ozs7Ozs7OztBQW9LQTs7Ozs7O0FBTUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7QUFTQTs7Ozs7O0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7O0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTs7O0FBM1RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7OztBQUtBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7OztBQUtBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7QUFPQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7O0FBT0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7OztBQUtBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFvR0E7QUFDQTtBQUNBOzs7Ozs7QUEwREE7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///13\n");

/***/ }),
/* 14 */
/*!*********************************!*\
  !*** ./salte-auth.utilities.js ***!
  \*********************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SalteAuthUtilities = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _lodash = __webpack_require__(/*! lodash */ 0);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Basic utilities to support the authentication flow\n */\nvar SalteAuthUtilities = function () {\n  /**\n   * Wraps all XHR and Fetch (if available) requests to allow promise interceptors\n   */\n  function SalteAuthUtilities() {\n    _classCallCheck(this, SalteAuthUtilities);\n\n    if (window.salte.SalteAuthUtilities.$instance) {\n      return window.salte.SalteAuthUtilities.$instance;\n    }\n\n    /** @ignore */\n    this.$interceptors = {\n      fetch: [],\n      xhr: []\n    };\n\n    (function (open) {\n      XMLHttpRequest.prototype.open = function (method, url) {\n        /** @ignore */\n        this.$url = url;\n        return open.call(this, method, url);\n      };\n    })(XMLHttpRequest.prototype.open);\n\n    var self = this;\n    (function (send) {\n      XMLHttpRequest.prototype.send = function (data) {\n        var _this = this;\n\n        var promises = [];\n        for (var i = 0; i < self.$interceptors.xhr.length; i++) {\n          var interceptor = self.$interceptors.xhr[i];\n          promises.push(interceptor(this, data));\n        }\n        Promise.all(promises).then(function () {\n          send.call(_this, data);\n        }).catch(function (error) {\n          var event = document.createEvent('Event');\n          event.initEvent('error', false, true);\n          event.detail = error;\n          _this.dispatchEvent(event);\n        });\n      };\n    })(XMLHttpRequest.prototype.send);\n\n    if (window.fetch) {\n      (function (fetch) {\n        window.fetch = function (input) {\n          var _this2 = this;\n\n          var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n          var promises = [];\n          for (var i = 0; i < self.$interceptors.fetch.length; i++) {\n            var interceptor = self.$interceptors.fetch[i];\n            promises.push(interceptor(input, options));\n          }\n          return Promise.all(promises).then(function () {\n            return fetch.call(_this2, input, options);\n          });\n        };\n      })(fetch);\n    }\n    window.salte.SalteAuthUtilities.$instance = this;\n  }\n\n  /**\n   * Creates a URL using a base url and a queryParams object\n   * @param {String} baseUrl the base url to attach the queryParams to\n   * @param {Object} queryParams the queryParams to attach to the baseUrl\n   * @return {String} the url with the request queryParams\n   */\n\n\n  _createClass(SalteAuthUtilities, [{\n    key: 'createUrl',\n    value: function createUrl(baseUrl) {\n      var queryParams = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      var url = baseUrl;\n\n      Object.keys(queryParams).forEach(function (key) {\n        var value = queryParams[key];\n        if ([undefined, null, ''].indexOf(value) === -1) {\n          url += '' + (url.indexOf('?') === -1 ? '?' : '&') + key + '=' + encodeURIComponent(value);\n        }\n      });\n\n      return url;\n    }\n\n    /**\n     * Converts a url to an absolute url\n     * @param {String} path the url path to resolve to an absolute url\n     * @return {String} the absolutely resolved url\n     */\n\n  }, {\n    key: 'resolveUrl',\n    value: function resolveUrl(path) {\n      if (!this.$$urlDocument) {\n        /** @ignore */\n        this.$$urlDocument = document.implementation.createHTMLDocument('url');\n        /** @ignore */\n        this.$$urlBase = this.$$urlDocument.createElement('base');\n        /** @ignore */\n        this.$$urlAnchor = this.$$urlDocument.createElement('a');\n        this.$$urlDocument.head.appendChild(this.$$urlBase);\n      }\n      this.$$urlBase.href = window.location.protocol + '//' + window.location.host;\n      this.$$urlAnchor.href = path.replace(/ /g, '%20');\n      return this.$$urlAnchor.href;\n    }\n\n    /**\n     * Checks if the given url matches any of the test urls\n     * @param {String} url The url to test\n     * @param {Array<String|RegExp>} tests The urls to match the test url against\n     * @return {Boolean} true if the url matches one of the tests\n     */\n\n  }, {\n    key: 'checkForMatchingUrl',\n    value: function checkForMatchingUrl(url) {\n      var tests = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n      var resolvedUrl = this.resolveUrl(url);\n      for (var i = 0; i < tests.length; i++) {\n        var test = tests[i];\n        if (test instanceof RegExp) {\n          return !!resolvedUrl.match(test);\n        } else {\n          return resolvedUrl.indexOf(this.resolveUrl(test)) === 0;\n        }\n      }\n\n      return false;\n    }\n\n    /**\n     * Determines if the given route is a secured route\n     * @param {String} route the route to verify\n     * @param {Boolean|Array<String>} securedRoutes a list of routes that require authentication\n     * @return {Boolean} true if the route provided is a secured route\n     */\n\n  }, {\n    key: 'isRouteSecure',\n    value: function isRouteSecure(route, securedRoutes) {\n      if (securedRoutes === true) {\n        return true;\n      } else if (securedRoutes instanceof Array) {\n        return this.checkForMatchingUrl(route, securedRoutes);\n      }\n      return false;\n    }\n\n    /**\n     * Opens a popup window in the middle of the viewport\n     * @param {String} url the url to be loaded\n     * @param {String} name the name of the window\n     * @param {Number} height the height of the window\n     * @param {Number} width the width of the window\n     * @return {Promise} resolves when the popup is closed\n     */\n\n  }, {\n    key: 'openPopup',\n    value: function openPopup(url) {\n      var name = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'salte-auth';\n      var height = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 600;\n      var width = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 400;\n\n      var top = window.innerHeight / 2 - height / 2 + window.screenTop;\n      var left = window.innerWidth / 2 - width / 2 + window.screenLeft;\n      var popupWindow = window.open(url, name, 'height=' + height + ', width=' + width + ', status=yes, toolbar=no, menubar=no, location=no, top=' + top + ', left=' + left);\n      if (!popupWindow) {\n        return Promise.reject(new ReferenceError('We were unable to open the popup window, its likely that the request was blocked.'));\n      }\n\n      popupWindow.focus();\n      // TODO: Find a better way of tracking when a Popup Window closes.\n      return new Promise(function (resolve) {\n        var checker = setInterval(function () {\n          if (!popupWindow.closed) return;\n          clearInterval(checker);\n          setTimeout(resolve);\n        }, 100);\n      });\n    }\n\n    /**\n     * Opens an iframe in the background\n     * @param {String} url the url to be loaded\n     * @param {Boolean} show whether the iframe should be visible\n     * @return {Promise} resolves when the iframe is closed\n     */\n\n  }, {\n    key: 'createIframe',\n    value: function createIframe(url, show) {\n      var iframe = document.createElement('iframe');\n      iframe.setAttribute('owner', 'salte-auth');\n      if (show) {\n        (0, _lodash.assign)(iframe.style, {\n          position: 'fixed',\n          top: 0,\n          bottom: 0,\n          left: 0,\n          right: 0,\n          height: '100%',\n          width: '100%',\n          zIndex: 9999,\n          border: 'none',\n\n          opacity: 0,\n          transition: '0.5s opacity'\n        });\n\n        setTimeout(function () {\n          iframe.style.opacity = 1;\n        });\n      } else {\n        iframe.style.display = 'none';\n      }\n      iframe.src = url;\n      document.body.appendChild(iframe);\n      return new Promise(function (resolve) {\n        iframe.addEventListener('DOMNodeRemoved', function () {\n          setTimeout(resolve);\n        });\n      });\n    }\n\n    /**\n     * Adds a XMLHttpRequest interceptor\n     * @param {Function} interceptor the interceptor function\n     */\n\n  }, {\n    key: 'addXHRInterceptor',\n    value: function addXHRInterceptor(interceptor) {\n      this.$interceptors.xhr.push(interceptor);\n    }\n\n    /**\n     * Adds a fetch interceptor\n     * @param {Function} interceptor the interceptor function\n     */\n\n  }, {\n    key: 'addFetchInterceptor',\n    value: function addFetchInterceptor(interceptor) {\n      this.$interceptors.fetch.push(interceptor);\n    }\n\n    /**\n     * Checks if the current window is an iframe\n     * @return {HTMLIFrameElement} true if the current window is an iframe.\n     * @private\n     */\n\n  }, {\n    key: '$iframe',\n    get: function get() {\n      if (window.self === window.top) {\n        return null;\n      }\n      return parent.document.querySelector('body > iframe[owner=\"salte-auth\"]');\n    }\n\n    /**\n     * Determines if the current window is a popup window opened by salte auth\n     * @return {Window} the window object\n     * @private\n     */\n\n  }, {\n    key: '$popup',\n    get: function get() {\n      if (window.opener && window.name === 'salte-auth') {\n        return window;\n      }\n      return null;\n    }\n  }]);\n\n  return SalteAuthUtilities;\n}();\n\n(0, _lodash.set)(window, 'salte.SalteAuthUtilities', (0, _lodash.get)(window, 'salte.SalteAuthUtilities', SalteAuthUtilities));\nexports.SalteAuthUtilities = SalteAuthUtilities;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL3NhbHRlLWF1dGgudXRpbGl0aWVzLmpzPzQ3NzUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYXNzaWduLCBnZXQsIHNldCB9IGZyb20gJ2xvZGFzaCc7XG5cbi8qKlxuICogQmFzaWMgdXRpbGl0aWVzIHRvIHN1cHBvcnQgdGhlIGF1dGhlbnRpY2F0aW9uIGZsb3dcbiAqL1xuY2xhc3MgU2FsdGVBdXRoVXRpbGl0aWVzIHtcbiAgLyoqXG4gICAqIFdyYXBzIGFsbCBYSFIgYW5kIEZldGNoIChpZiBhdmFpbGFibGUpIHJlcXVlc3RzIHRvIGFsbG93IHByb21pc2UgaW50ZXJjZXB0b3JzXG4gICAqL1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBpZiAod2luZG93LnNhbHRlLlNhbHRlQXV0aFV0aWxpdGllcy4kaW5zdGFuY2UpIHtcbiAgICAgIHJldHVybiB3aW5kb3cuc2FsdGUuU2FsdGVBdXRoVXRpbGl0aWVzLiRpbnN0YW5jZTtcbiAgICB9XG5cbiAgICAvKiogQGlnbm9yZSAqL1xuICAgIHRoaXMuJGludGVyY2VwdG9ycyA9IHtcbiAgICAgIGZldGNoOiBbXSxcbiAgICAgIHhocjogW11cbiAgICB9O1xuXG4gICAgKGZ1bmN0aW9uKG9wZW4pIHtcbiAgICAgIFhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZS5vcGVuID0gZnVuY3Rpb24obWV0aG9kLCB1cmwpIHtcbiAgICAgICAgLyoqIEBpZ25vcmUgKi9cbiAgICAgICAgdGhpcy4kdXJsID0gdXJsO1xuICAgICAgICByZXR1cm4gb3Blbi5jYWxsKHRoaXMsIG1ldGhvZCwgdXJsKTtcbiAgICAgIH07XG4gICAgfSkoWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlLm9wZW4pO1xuXG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgKGZ1bmN0aW9uKHNlbmQpIHtcbiAgICAgIFhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZS5zZW5kID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICBjb25zdCBwcm9taXNlcyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlbGYuJGludGVyY2VwdG9ycy54aHIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBjb25zdCBpbnRlcmNlcHRvciA9IHNlbGYuJGludGVyY2VwdG9ycy54aHJbaV07XG4gICAgICAgICAgcHJvbWlzZXMucHVzaChpbnRlcmNlcHRvcih0aGlzLCBkYXRhKSk7XG4gICAgICAgIH1cbiAgICAgICAgUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIHNlbmQuY2FsbCh0aGlzLCBkYXRhKTtcbiAgICAgICAgfSkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgY29uc3QgZXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnRXZlbnQnKTtcbiAgICAgICAgICBldmVudC5pbml0RXZlbnQoJ2Vycm9yJywgZmFsc2UsIHRydWUpO1xuICAgICAgICAgIGV2ZW50LmRldGFpbCA9IGVycm9yO1xuICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9KShYTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUuc2VuZCk7XG5cbiAgICBpZiAod2luZG93LmZldGNoKSB7XG4gICAgICAoZnVuY3Rpb24oZmV0Y2gpIHtcbiAgICAgICAgd2luZG93LmZldGNoID0gZnVuY3Rpb24oaW5wdXQsIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICAgIGNvbnN0IHByb21pc2VzID0gW107XG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWxmLiRpbnRlcmNlcHRvcnMuZmV0Y2gubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGludGVyY2VwdG9yID0gc2VsZi4kaW50ZXJjZXB0b3JzLmZldGNoW2ldO1xuICAgICAgICAgICAgcHJvbWlzZXMucHVzaChpbnRlcmNlcHRvcihpbnB1dCwgb3B0aW9ucykpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGZldGNoLmNhbGwodGhpcywgaW5wdXQsIG9wdGlvbnMpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgfSkoZmV0Y2gpO1xuICAgIH1cbiAgICB3aW5kb3cuc2FsdGUuU2FsdGVBdXRoVXRpbGl0aWVzLiRpbnN0YW5jZSA9IHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIFVSTCB1c2luZyBhIGJhc2UgdXJsIGFuZCBhIHF1ZXJ5UGFyYW1zIG9iamVjdFxuICAgKiBAcGFyYW0ge1N0cmluZ30gYmFzZVVybCB0aGUgYmFzZSB1cmwgdG8gYXR0YWNoIHRoZSBxdWVyeVBhcmFtcyB0b1xuICAgKiBAcGFyYW0ge09iamVjdH0gcXVlcnlQYXJhbXMgdGhlIHF1ZXJ5UGFyYW1zIHRvIGF0dGFjaCB0byB0aGUgYmFzZVVybFxuICAgKiBAcmV0dXJuIHtTdHJpbmd9IHRoZSB1cmwgd2l0aCB0aGUgcmVxdWVzdCBxdWVyeVBhcmFtc1xuICAgKi9cbiAgY3JlYXRlVXJsKGJhc2VVcmwsIHF1ZXJ5UGFyYW1zID0ge30pIHtcbiAgICBsZXQgdXJsID0gYmFzZVVybDtcblxuICAgIE9iamVjdC5rZXlzKHF1ZXJ5UGFyYW1zKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgIGNvbnN0IHZhbHVlID0gcXVlcnlQYXJhbXNba2V5XTtcbiAgICAgIGlmIChbdW5kZWZpbmVkLCBudWxsLCAnJ10uaW5kZXhPZih2YWx1ZSkgPT09IC0xKSB7XG4gICAgICAgIHVybCArPSBgJHt1cmwuaW5kZXhPZignPycpID09PSAtMSA/ICc/JyA6ICcmJ30ke2tleX09JHtlbmNvZGVVUklDb21wb25lbnQodmFsdWUpfWA7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdXJsO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnRzIGEgdXJsIHRvIGFuIGFic29sdXRlIHVybFxuICAgKiBAcGFyYW0ge1N0cmluZ30gcGF0aCB0aGUgdXJsIHBhdGggdG8gcmVzb2x2ZSB0byBhbiBhYnNvbHV0ZSB1cmxcbiAgICogQHJldHVybiB7U3RyaW5nfSB0aGUgYWJzb2x1dGVseSByZXNvbHZlZCB1cmxcbiAgICovXG4gIHJlc29sdmVVcmwocGF0aCkge1xuICAgIGlmICghdGhpcy4kJHVybERvY3VtZW50KSB7XG4gICAgICAvKiogQGlnbm9yZSAqL1xuICAgICAgdGhpcy4kJHVybERvY3VtZW50ID0gZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCd1cmwnKTtcbiAgICAgIC8qKiBAaWdub3JlICovXG4gICAgICB0aGlzLiQkdXJsQmFzZSA9IHRoaXMuJCR1cmxEb2N1bWVudC5jcmVhdGVFbGVtZW50KCdiYXNlJyk7XG4gICAgICAvKiogQGlnbm9yZSAqL1xuICAgICAgdGhpcy4kJHVybEFuY2hvciA9IHRoaXMuJCR1cmxEb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICB0aGlzLiQkdXJsRG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZCh0aGlzLiQkdXJsQmFzZSk7XG4gICAgfVxuICAgIHRoaXMuJCR1cmxCYXNlLmhyZWYgPSB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgKyAnLy8nICsgd2luZG93LmxvY2F0aW9uLmhvc3Q7XG4gICAgdGhpcy4kJHVybEFuY2hvci5ocmVmID0gcGF0aC5yZXBsYWNlKC8gL2csICclMjAnKTtcbiAgICByZXR1cm4gdGhpcy4kJHVybEFuY2hvci5ocmVmO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiB0aGUgZ2l2ZW4gdXJsIG1hdGNoZXMgYW55IG9mIHRoZSB0ZXN0IHVybHNcbiAgICogQHBhcmFtIHtTdHJpbmd9IHVybCBUaGUgdXJsIHRvIHRlc3RcbiAgICogQHBhcmFtIHtBcnJheTxTdHJpbmd8UmVnRXhwPn0gdGVzdHMgVGhlIHVybHMgdG8gbWF0Y2ggdGhlIHRlc3QgdXJsIGFnYWluc3RcbiAgICogQHJldHVybiB7Qm9vbGVhbn0gdHJ1ZSBpZiB0aGUgdXJsIG1hdGNoZXMgb25lIG9mIHRoZSB0ZXN0c1xuICAgKi9cbiAgY2hlY2tGb3JNYXRjaGluZ1VybCh1cmwsIHRlc3RzID0gW10pIHtcbiAgICBjb25zdCByZXNvbHZlZFVybCA9IHRoaXMucmVzb2x2ZVVybCh1cmwpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGVzdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHRlc3QgPSB0ZXN0c1tpXTtcbiAgICAgIGlmICh0ZXN0IGluc3RhbmNlb2YgUmVnRXhwKSB7XG4gICAgICAgIHJldHVybiAhIXJlc29sdmVkVXJsLm1hdGNoKHRlc3QpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHJlc29sdmVkVXJsLmluZGV4T2YodGhpcy5yZXNvbHZlVXJsKHRlc3QpKSA9PT0gMDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogRGV0ZXJtaW5lcyBpZiB0aGUgZ2l2ZW4gcm91dGUgaXMgYSBzZWN1cmVkIHJvdXRlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSByb3V0ZSB0aGUgcm91dGUgdG8gdmVyaWZ5XG4gICAqIEBwYXJhbSB7Qm9vbGVhbnxBcnJheTxTdHJpbmc+fSBzZWN1cmVkUm91dGVzIGEgbGlzdCBvZiByb3V0ZXMgdGhhdCByZXF1aXJlIGF1dGhlbnRpY2F0aW9uXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWUgaWYgdGhlIHJvdXRlIHByb3ZpZGVkIGlzIGEgc2VjdXJlZCByb3V0ZVxuICAgKi9cbiAgaXNSb3V0ZVNlY3VyZShyb3V0ZSwgc2VjdXJlZFJvdXRlcykge1xuICAgIGlmIChzZWN1cmVkUm91dGVzID09PSB0cnVlKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKHNlY3VyZWRSb3V0ZXMgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgcmV0dXJuIHRoaXMuY2hlY2tGb3JNYXRjaGluZ1VybChyb3V0ZSwgc2VjdXJlZFJvdXRlcyk7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPcGVucyBhIHBvcHVwIHdpbmRvdyBpbiB0aGUgbWlkZGxlIG9mIHRoZSB2aWV3cG9ydFxuICAgKiBAcGFyYW0ge1N0cmluZ30gdXJsIHRoZSB1cmwgdG8gYmUgbG9hZGVkXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIHRoZSBuYW1lIG9mIHRoZSB3aW5kb3dcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGhlaWdodCB0aGUgaGVpZ2h0IG9mIHRoZSB3aW5kb3dcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHdpZHRoIHRoZSB3aWR0aCBvZiB0aGUgd2luZG93XG4gICAqIEByZXR1cm4ge1Byb21pc2V9IHJlc29sdmVzIHdoZW4gdGhlIHBvcHVwIGlzIGNsb3NlZFxuICAgKi9cbiAgb3BlblBvcHVwKHVybCwgbmFtZSA9ICdzYWx0ZS1hdXRoJywgaGVpZ2h0ID0gNjAwLCB3aWR0aCA9IDQwMCkge1xuICAgIGNvbnN0IHRvcCA9ICgod2luZG93LmlubmVySGVpZ2h0IC8gMikgLSAoaGVpZ2h0IC8gMikpICsgd2luZG93LnNjcmVlblRvcDtcbiAgICBjb25zdCBsZWZ0ID0gKCh3aW5kb3cuaW5uZXJXaWR0aCAvIDIpIC0gKHdpZHRoIC8gMikpICsgd2luZG93LnNjcmVlbkxlZnQ7XG4gICAgY29uc3QgcG9wdXBXaW5kb3cgPSB3aW5kb3cub3Blbih1cmwsIG5hbWUsIGBoZWlnaHQ9JHtoZWlnaHR9LCB3aWR0aD0ke3dpZHRofSwgc3RhdHVzPXllcywgdG9vbGJhcj1ubywgbWVudWJhcj1ubywgbG9jYXRpb249bm8sIHRvcD0ke3RvcH0sIGxlZnQ9JHtsZWZ0fWApO1xuICAgIGlmICghcG9wdXBXaW5kb3cpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgUmVmZXJlbmNlRXJyb3IoJ1dlIHdlcmUgdW5hYmxlIHRvIG9wZW4gdGhlIHBvcHVwIHdpbmRvdywgaXRzIGxpa2VseSB0aGF0IHRoZSByZXF1ZXN0IHdhcyBibG9ja2VkLicpKTtcbiAgICB9XG5cbiAgICBwb3B1cFdpbmRvdy5mb2N1cygpO1xuICAgIC8vIFRPRE86IEZpbmQgYSBiZXR0ZXIgd2F5IG9mIHRyYWNraW5nIHdoZW4gYSBQb3B1cCBXaW5kb3cgY2xvc2VzLlxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgY29uc3QgY2hlY2tlciA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgaWYgKCFwb3B1cFdpbmRvdy5jbG9zZWQpIHJldHVybjtcbiAgICAgICAgY2xlYXJJbnRlcnZhbChjaGVja2VyKTtcbiAgICAgICAgc2V0VGltZW91dChyZXNvbHZlKTtcbiAgICAgIH0sIDEwMCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogT3BlbnMgYW4gaWZyYW1lIGluIHRoZSBiYWNrZ3JvdW5kXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB1cmwgdGhlIHVybCB0byBiZSBsb2FkZWRcbiAgICogQHBhcmFtIHtCb29sZWFufSBzaG93IHdoZXRoZXIgdGhlIGlmcmFtZSBzaG91bGQgYmUgdmlzaWJsZVxuICAgKiBAcmV0dXJuIHtQcm9taXNlfSByZXNvbHZlcyB3aGVuIHRoZSBpZnJhbWUgaXMgY2xvc2VkXG4gICAqL1xuICBjcmVhdGVJZnJhbWUodXJsLCBzaG93KSB7XG4gICAgY29uc3QgaWZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaWZyYW1lJyk7XG4gICAgaWZyYW1lLnNldEF0dHJpYnV0ZSgnb3duZXInLCAnc2FsdGUtYXV0aCcpO1xuICAgIGlmIChzaG93KSB7XG4gICAgICBhc3NpZ24oaWZyYW1lLnN0eWxlLCB7XG4gICAgICAgIHBvc2l0aW9uOiAnZml4ZWQnLFxuICAgICAgICB0b3A6IDAsXG4gICAgICAgIGJvdHRvbTogMCxcbiAgICAgICAgbGVmdDogMCxcbiAgICAgICAgcmlnaHQ6IDAsXG4gICAgICAgIGhlaWdodDogJzEwMCUnLFxuICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgICB6SW5kZXg6IDk5OTksXG4gICAgICAgIGJvcmRlcjogJ25vbmUnLFxuXG4gICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgIHRyYW5zaXRpb246ICcwLjVzIG9wYWNpdHknXG4gICAgICB9KTtcblxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGlmcmFtZS5zdHlsZS5vcGFjaXR5ID0gMTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZnJhbWUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB9XG4gICAgaWZyYW1lLnNyYyA9IHVybDtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGlmcmFtZSk7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICBpZnJhbWUuYWRkRXZlbnRMaXN0ZW5lcignRE9NTm9kZVJlbW92ZWQnLCAoKSA9PiB7XG4gICAgICAgIHNldFRpbWVvdXQocmVzb2x2ZSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGEgWE1MSHR0cFJlcXVlc3QgaW50ZXJjZXB0b3JcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gaW50ZXJjZXB0b3IgdGhlIGludGVyY2VwdG9yIGZ1bmN0aW9uXG4gICAqL1xuICBhZGRYSFJJbnRlcmNlcHRvcihpbnRlcmNlcHRvcikge1xuICAgIHRoaXMuJGludGVyY2VwdG9ycy54aHIucHVzaChpbnRlcmNlcHRvcik7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBhIGZldGNoIGludGVyY2VwdG9yXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGludGVyY2VwdG9yIHRoZSBpbnRlcmNlcHRvciBmdW5jdGlvblxuICAgKi9cbiAgYWRkRmV0Y2hJbnRlcmNlcHRvcihpbnRlcmNlcHRvcikge1xuICAgIHRoaXMuJGludGVyY2VwdG9ycy5mZXRjaC5wdXNoKGludGVyY2VwdG9yKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgdGhlIGN1cnJlbnQgd2luZG93IGlzIGFuIGlmcmFtZVxuICAgKiBAcmV0dXJuIHtIVE1MSUZyYW1lRWxlbWVudH0gdHJ1ZSBpZiB0aGUgY3VycmVudCB3aW5kb3cgaXMgYW4gaWZyYW1lLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZ2V0ICRpZnJhbWUoKSB7XG4gICAgaWYgKHdpbmRvdy5zZWxmID09PSB3aW5kb3cudG9wKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIHBhcmVudC5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5ID4gaWZyYW1lW293bmVyPVwic2FsdGUtYXV0aFwiXScpO1xuICB9XG5cbiAgLyoqXG4gICAqIERldGVybWluZXMgaWYgdGhlIGN1cnJlbnQgd2luZG93IGlzIGEgcG9wdXAgd2luZG93IG9wZW5lZCBieSBzYWx0ZSBhdXRoXG4gICAqIEByZXR1cm4ge1dpbmRvd30gdGhlIHdpbmRvdyBvYmplY3RcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldCAkcG9wdXAoKSB7XG4gICAgaWYgKHdpbmRvdy5vcGVuZXIgJiYgd2luZG93Lm5hbWUgPT09ICdzYWx0ZS1hdXRoJykge1xuICAgICAgcmV0dXJuIHdpbmRvdztcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuc2V0KHdpbmRvdywgJ3NhbHRlLlNhbHRlQXV0aFV0aWxpdGllcycsIGdldCh3aW5kb3csICdzYWx0ZS5TYWx0ZUF1dGhVdGlsaXRpZXMnLCBTYWx0ZUF1dGhVdGlsaXRpZXMpKTtcbmV4cG9ydCB7IFNhbHRlQXV0aFV0aWxpdGllcyB9O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9zYWx0ZS1hdXRoLnV0aWxpdGllcy5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7QUFDQTs7O0FBQ0E7OztBQUdBO0FBQ0E7OztBQUdBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7O0FBTUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7OztBQU1BO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7OztBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQVFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7O0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVpBO0FBQ0E7QUFjQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFHQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///14\n");

/***/ })
/******/ ]);
});