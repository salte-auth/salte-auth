/**
 * @salte-io/salte-auth JavaScript Library v2.0.3
 *
 * @license MIT (https://github.com/salte-io/salte-auth/blob/master/LICENSE)
 *
 * Made with â™¥ by Ceci <admin@cecilias.me>, Dave Woodward <dave@salte.io>
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("lodash")):"function"==typeof define&&define.amd?define("salte.auth",["lodash"],t):"object"==typeof exports?exports["salte.auth"]=t(require("lodash")):e["salte.auth"]=t(e._)}("undefined"!=typeof self?self:this,function(e){return function(e){function t(r){if(i[r])return i[r].exports;var n=i[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var i={};return t.m=e,t.c=i,t.d=function(e,i,r){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)}([function(t,i){t.exports=e},function(e,t){var i="undefined"!=typeof crypto&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&msCrypto.getRandomValues.bind(msCrypto);if(i){var r=new Uint8Array(16);e.exports=function(){return i(r),r}}else{var n=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n}}},function(e,t){function i(e,t){var i=t||0,n=r;return n[e[i++]]+n[e[i++]]+n[e[i++]]+n[e[i++]]+"-"+n[e[i++]]+n[e[i++]]+"-"+n[e[i++]]+n[e[i++]]+"-"+n[e[i++]]+n[e[i++]]+"-"+n[e[i++]]+n[e[i++]]+n[e[i++]]+n[e[i++]]+n[e[i++]]+n[e[i++]]}for(var r=[],n=0;n<256;++n)r[n]=(n+256).toString(16).substr(1);e.exports=i},function(e,t,i){e.exports=i(4)},function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.SalteAuth=void 0;var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),o=i(0),s=i(5),a=function(e){return e&&e.__esModule?e:{default:e}}(s),u=i(8),l=i(13),c=i(14),f=function(){function e(t){var i=this;if(r(this,e),window.salte.auth)return window.salte.auth;if(!t)throw new ReferenceError("A config must be provided.");if(this.$providers=u.Providers,this.$promises={},this.$config=t,this.$config=(0,o.defaultsDeep)(t,this.$provider.defaultConfig),this.$utilities=new c.SalteAuthUtilities,this.profile=new l.SalteAuthProfile(this.$config),this.$utilities.$iframe)parent.document.body.removeChild(this.$utilities.$iframe);else if(this.$utilities.$popup)"session"===this.$config.storageType&&this.profile.$$transfer("session","local"),setTimeout(this.$utilities.$popup.close);else if(this.profile.$redirectUrl&&location.href!==this.profile.$redirectUrl){var n=this.profile.$validate();n?this.profile.$clear():(location.href=this.profile.$redirectUrl,this.profile.$redirectUrl=void 0),this.$config.redirectLoginCallback(n)}else this.$utilities.addXHRInterceptor(function(e,t){if(i.$utilities.checkForMatchingUrl(e.$url,i.$config.endpoints))return i.retrieveAccessToken().then(function(t){e.setRequestHeader("Authorization","Bearer "+t)})}),this.$utilities.addFetchInterceptor(function(e,t){if(i.$utilities.checkForMatchingUrl(e,i.$config.endpoints))return i.retrieveAccessToken().then(function(e){t.headers=t.headers||{},t.headers.Authorization="Bearer "+e})}),window.addEventListener("popstate",this.$$onRouteChanged.bind(this)),document.addEventListener("click",this.$$onRouteChanged.bind(this)),setTimeout(this.$$onRouteChanged.bind(this));window.salte.auth=this}return n(e,[{key:"loginWithIframe",value:function(){var e=this;return this.$promises.login?this.$promises.login:(this.profile.$clear(),this.$promises.login=this.$utilities.createIframe(this.$loginUrl,!0).then(function(){e.$promises.login=null;var t=e.profile.$validate();if(t)return e.profile.$clear(),Promise.reject(t)}).catch(function(t){return e.$promises.login=null,Promise.reject(t)}),this.$promises.login)}},{key:"loginWithPopup",value:function(){var e=this;return this.$promises.login?this.$promises.login:(this.profile.$clear(),this.$promises.login=this.$utilities.openPopup(this.$loginUrl).then(function(){e.$promises.login=null,"session"===e.$config.storageType&&e.profile.$$transfer("local","session");var t=e.profile.$validate();if(t)return e.profile.$clear(),Promise.reject(t)}).catch(function(t){return e.$promises.login=null,Promise.reject(t)}),this.$promises.login)}},{key:"loginWithRedirect",value:function(){if(!this.$config.redirectLoginCallback)throw new ReferenceError('A redirectLoginCallback is required to invoke "loginWithRedirect"!');this.profile.$clear(),this.profile.$redirectUrl=this.profile.$redirectUrl||location.href,location.href=this.$loginUrl}},{key:"logoutWithIframe",value:function(){var e=this;return this.$promises.logout?this.$promises.logout:(this.profile.$clear(),this.$promises.logout=this.$utilities.createIframe(this.$deauthorizeUrl).then(function(){e.$promises.logout=null}),this.$promises.logout)}},{key:"logoutWithPopup",value:function(){var e=this;return this.$promises.logout?this.$promises.logout:(this.profile.$clear(),this.$promises.logout=this.$utilities.openPopup(this.$deauthorizeUrl).then(function(){e.$promises.logout=null}),this.$promises.logout)}},{key:"logoutWithRedirect",value:function(){this.profile.$clear(),location.href=this.$deauthorizeUrl}},{key:"retrieveAccessToken",value:function(){var e=this;if(this.$promises.token)return this.$promises.token;if(this.$promises.token=Promise.resolve(),this.profile.idTokenExpired)if("popup"===this.$config.loginType)this.$promises.token=this.loginWithPopup();else{if(-1===[void 0,null,"iframe"].indexOf(this.$config.loginType))return this.$promises.token=null,Promise.reject(new ReferenceError("Invaid Login Type ("+this.$config.loginType+")"));this.$promises.token=this.loginWithIframe()}return this.$promises.token=this.$promises.token.then(function(){return e.profile.$clearErrors(),e.profile.accessTokenExpired?e.$utilities.createIframe(e.$accessTokenUrl).then(function(){e.$promises.token=null;var t=e.profile.$validate(!0);return t?Promise.reject(t):e.profile.$accessToken}):(e.$promises.token=null,e.profile.$accessToken)}).catch(function(t){return e.$promises.token=null,Promise.reject(t)}),this.$promises.token}},{key:"$$onRouteChanged",value:function(){this.$utilities.isRouteSecure(location.href,this.$config.routes)&&this.retrieveAccessToken()}},{key:"$provider",get:function(){if(!this.$config.provider)throw new ReferenceError("A provider must be specified");if("string"==typeof this.$config.provider){var e=this.$providers[this.$config.provider];if(!e)throw new ReferenceError("Unknown Provider ("+this.$config.provider+")");return e}return this.$config.provider}},{key:"$accessTokenUrl",get:function(){this.profile.$localState=a.default.v4(),this.profile.$nonce=a.default.v4();var e=this.$config.providerUrl+"/authorize";return this.$provider.authorizeEndpoint&&(e=this.$provider.authorizeEndpoint.call(this,this.$config)),this.$utilities.createUrl(e,(0,o.assign)({state:this.profile.$localState,nonce:this.profile.$nonce,response_type:"token",redirect_uri:this.$config.redirectUrl,client_id:this.$config.clientId,scope:this.$config.scope,prompt:"none"},this.$config.queryParams))}},{key:"$loginUrl",get:function(){this.profile.$localState=a.default.v4(),this.profile.$nonce=a.default.v4();var e=this.$config.providerUrl+"/authorize";return this.$provider.authorizeEndpoint&&(e=this.$provider.authorizeEndpoint.call(this,this.$config)),this.$utilities.createUrl(e,(0,o.assign)({state:this.profile.$localState,nonce:this.profile.$nonce,response_type:this.$config.responseType,redirect_uri:this.$config.redirectUrl,client_id:this.$config.clientId,scope:this.$config.scope},this.$config.queryParams))}},{key:"$deauthorizeUrl",get:function(){return this.$provider.deauthorizeUrl.call(this,this.$config)}}]),e}();(0,o.set)(window,"salte.SalteAuth",(0,o.get)(window,"salte.SalteAuth",f)),t.SalteAuth=f},function(e,t,i){var r=i(6),n=i(7),o=n;o.v1=r,o.v4=n,e.exports=o},function(e,t,i){function r(e,t,i){var r=t&&i||0,c=t||[];e=e||{};var f=e.node||n,h=void 0!==e.clockseq?e.clockseq:o;if(null==f||null==h){var d=s();null==f&&(f=n=[1|d[0],d[1],d[2],d[3],d[4],d[5]]),null==h&&(h=o=16383&(d[6]<<8|d[7]))}var p=void 0!==e.msecs?e.msecs:(new Date).getTime(),$=void 0!==e.nsecs?e.nsecs:l+1,v=p-u+($-l)/1e4;if(v<0&&void 0===e.clockseq&&(h=h+1&16383),(v<0||p>u)&&void 0===e.nsecs&&($=0),$>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");u=p,l=$,o=h,p+=122192928e5;var g=(1e4*(268435455&p)+$)%4294967296;c[r++]=g>>>24&255,c[r++]=g>>>16&255,c[r++]=g>>>8&255,c[r++]=255&g;var y=p/4294967296*1e4&268435455;c[r++]=y>>>8&255,c[r++]=255&y,c[r++]=y>>>24&15|16,c[r++]=y>>>16&255,c[r++]=h>>>8|128,c[r++]=255&h;for(var m=0;m<6;++m)c[r+m]=f[m];return t||a(c)}var n,o,s=i(1),a=i(2),u=0,l=0;e.exports=r},function(e,t,i){function r(e,t,i){var r=t&&i||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null),e=e||{};var s=e.random||(e.rng||n)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[r+a]=s[a];return t||o(s)}var n=i(1),o=i(2);e.exports=r},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Providers=void 0;var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),s=i(9),a=r(s),u=i(10),l=r(u),c=i(11),f=r(c),h=i(12),d=r(h),p=function(){function e(){n(this,e)}return o(e,null,[{key:"auth0",get:function(){return a.default}},{key:"azure",get:function(){return l.default}},{key:"cognito",get:function(){return f.default}},{key:"wso2",get:function(){return d.default}}]),e}();t.Providers=p},function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return n(e,null,[{key:"deauthorizeUrl",value:function(e){return this.$utilities.createUrl(e.providerUrl+"/v2/logout",{returnTo:e.redirectUrl,client_id:e.clientId})}}]),e}();t.default=o},function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return n(e,null,[{key:"authorizeEndpoint",value:function(e){return e.providerUrl+"/oauth2/authorize"}},{key:"deauthorizeUrl",value:function(e){return this.$utilities.createUrl(e.providerUrl+"/oauth2/logout",{post_logout_redirect_uri:e.redirectUrl})}}]),e}();t.default=o},function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return n(e,null,[{key:"authorizeEndpoint",value:function(e){return e.providerUrl+"/oauth2/authorize"}},{key:"deauthorizeUrl",value:function(e){return this.$utilities.createUrl(e.providerUrl+"/logout",{logout_uri:e.redirectUrl,client_id:e.clientId})}},{key:"defaultConfig",get:function(){return{validation:{nonce:!1}}}}]),e}();t.default=o},function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return n(e,null,[{key:"deauthorizeUrl",value:function(e){return this.$utilities.createUrl(e.providerUrl+"/commonauth",{commonAuthLogout:!0,type:"oidc",commonAuthCallerPath:e.redirectUrl,relyingParty:e.relyingParty})}}]),e}();t.default=o},function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.SalteAuthProfile=void 0;var n=function(){function e(e,t){var i=[],r=!0,n=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(i.push(s.value),!t||i.length!==t);r=!0);}catch(e){n=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(n)throw o}}return i}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),s=i(0),a=function(){function e(t){if(r(this,e),window.salte.SalteAuthProfile.$instance)return window.salte.SalteAuthProfile.$instance;if(this.$$config=(0,s.defaultsDeep)(t,{validation:{nonce:!0,state:!0,azp:!0,aud:!0},storageType:"session"}),location.hash)for(var i=location.hash.replace(/(#!?[^#]+)?#/,"").split("&"),o=0;o<i.length;o++){var a=i[o],u=a.split("="),l=n(u,2),c=l[0],f=l[1];this.$parse(c,decodeURIComponent(f))}window.salte.SalteAuthProfile.$instance=this}return o(e,[{key:"$parse",value:function(e,t){switch(e){case"token_type":this.$tokenType=t;break;case"expires_in":this.$expiration=Date.now()+t;break;case"access_token":this.$accessToken=t;break;case"id_token":this.$idToken=t;break;case"state":this.$state=t;break;case"error":this.$error=t;break;case"error_description":this.$errorDescription=t}}},{key:"$validate",value:function(e){var t=this;if(this.$$config.validation){if(this.$error)return{code:this.$error,description:this.$errorDescription};if(!this.$idToken)return{code:"login_canceled",description:"User likely canceled the login or something unexpected occurred."};if(this.$$config.validation.state&&this.$localState!==this.$state)return{code:"invalid_state",description:"State provided by identity provider did not match local state."};if(!e){if(this.$$config.validation.nonce&&this.$nonce!==this.userInfo.nonce)return{code:"invalid_nonce",description:"Nonce provided by identity provider did not match local nonce."};if(Array.isArray(this.userInfo.aud)){if(this.$$config.validation.azp){if(!this.userInfo.azp)return{code:"invalid_azp",description:"Audience was returned as an array and AZP was not present on the ID Token."};if(this.userInfo.azp!==this.$$config.clientId)return{code:"invalid_azp",description:"AZP does not match the Client ID."}}if(this.$$config.validation.aud){if(!(0,s.find)(this.userInfo.aud,function(e){return e===t.$$config.clientId}))return{code:"invalid_aud",description:"None of the audience values matched the Client ID."}}}else if(this.$$config.validation.aud&&this.userInfo.aud!==this.$$config.clientId)return{code:"invalid_aud",description:"The audience did not match the Client ID."}}}}},{key:"$saveItem",value:function(e,t){-1!==[void 0,null].indexOf(t)?this.$storage.removeItem(e):this.$storage.setItem(e,t)}},{key:"$$getStorage",value:function(e){if("local"===e)return localStorage;if("session"===e)return sessionStorage;throw new ReferenceError("Unknown Storage Type ("+e+")")}},{key:"$$transfer",value:function(e,t){var i=this.$$getStorage(e),r=this.$$getStorage(t);for(var n in i)0===n.indexOf("salte.auth.")&&(r.setItem(n,i.getItem(n)),i.removeItem(n))}},{key:"$clear",value:function(){for(var e in this.$storage)e.match(/^salte\.auth\.[^$]/)&&this.$saveItem(e,void 0)}},{key:"$clearErrors",value:function(){this.$error=void 0,this.$errorDescription=void 0}},{key:"idTokenExpired",get:function(){return!this.$idToken||Date.now()>=1e3*this.userInfo.exp}},{key:"accessTokenExpired",get:function(){return!this.$accessToken||Date.now()>=this.$expiration}},{key:"$tokenType",get:function(){return this.$storage.getItem("salte.auth.token-type")},set:function(e){this.$saveItem("salte.auth.token-type",e)}},{key:"$expiration",get:function(){return this.$storage.getItem("salte.auth.expiration")},set:function(e){this.$saveItem("salte.auth.expiration",e)}},{key:"$accessToken",get:function(){return this.$storage.getItem("salte.auth.access-token")},set:function(e){this.$saveItem("salte.auth.access-token",e)}},{key:"$idToken",get:function(){return this.$storage.getItem("salte.auth.id-token")},set:function(e){this.$saveItem("salte.auth.id-token",e)}},{key:"$state",get:function(){return this.$storage.getItem("salte.auth.state")},set:function(e){this.$saveItem("salte.auth.state",e)}},{key:"$localState",get:function(){return this.$storage.getItem("salte.auth.local-state")},set:function(e){this.$saveItem("salte.auth.local-state",e)}},{key:"$error",get:function(){return this.$storage.getItem("salte.auth.error")},set:function(e){this.$saveItem("salte.auth.error",e)}},{key:"$errorDescription",get:function(){return this.$storage.getItem("salte.auth.error-description")},set:function(e){this.$saveItem("salte.auth.error-description",e)}},{key:"$redirectUrl",get:function(){return this.$storage.getItem("salte.auth.$redirect-url")},set:function(e){this.$saveItem("salte.auth.$redirect-url",e)}},{key:"$nonce",get:function(){return this.$storage.getItem("salte.auth.nonce")},set:function(e){this.$saveItem("salte.auth.nonce",e)}},{key:"userInfo",get:function(){if(this.$idToken){var e=this.$idToken.split(".");if(3===e.length)return JSON.parse(atob(e[1]))}return null}},{key:"$storage",get:function(){return this.$$getStorage(this.$$config.storageType)}}]),e}();(0,s.set)(window,"salte.SalteAuthProfile",(0,s.get)(window,"salte.SalteAuthProfile",a)),t.SalteAuthProfile=a},function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.SalteAuthUtilities=void 0;var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),o=i(0),s=function(){function e(){if(r(this,e),window.salte.SalteAuthUtilities.$instance)return window.salte.SalteAuthUtilities.$instance;this.$interceptors={fetch:[],xhr:[]},function(e){XMLHttpRequest.prototype.open=function(t,i){return this.$url=i,e.call(this,t,i)}}(XMLHttpRequest.prototype.open);var t=this;!function(e){XMLHttpRequest.prototype.send=function(i){for(var r=this,n=[],o=0;o<t.$interceptors.xhr.length;o++){var s=t.$interceptors.xhr[o];n.push(s(this,i))}Promise.all(n).then(function(){e.call(r,i)}).catch(function(e){var t=document.createEvent("Event");t.initEvent("error",!1,!0),t.detail=e,r.dispatchEvent(t)})}}(XMLHttpRequest.prototype.send),window.fetch&&function(e){window.fetch=function(i){for(var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=[],s=0;s<t.$interceptors.fetch.length;s++){var a=t.$interceptors.fetch[s];o.push(a(i,n))}return Promise.all(o).then(function(){return e.call(r,i,n)})}}(fetch),window.salte.SalteAuthUtilities.$instance=this}return n(e,[{key:"createUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e;return Object.keys(t).forEach(function(e){var r=t[e];-1===[void 0,null,""].indexOf(r)&&(i+=(-1===i.indexOf("?")?"?":"&")+e+"="+encodeURIComponent(r))}),i}},{key:"resolveUrl",value:function(e){return this.$$urlDocument||(this.$$urlDocument=document.implementation.createHTMLDocument("url"),this.$$urlBase=this.$$urlDocument.createElement("base"),this.$$urlAnchor=this.$$urlDocument.createElement("a"),this.$$urlDocument.head.appendChild(this.$$urlBase)),this.$$urlBase.href=window.location.protocol+"//"+window.location.host,this.$$urlAnchor.href=e.replace(/ /g,"%20"),this.$$urlAnchor.href}},{key:"checkForMatchingUrl",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=this.resolveUrl(e),r=0;r<t.length;r++){var n=t[r];return n instanceof RegExp?!!i.match(n):0===i.indexOf(this.resolveUrl(n))}return!1}},{key:"isRouteSecure",value:function(e,t){return!0===t||t instanceof Array&&this.checkForMatchingUrl(e,t)}},{key:"openPopup",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"salte-auth",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:600,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:400,n=window.innerHeight/2-i/2+window.screenTop,o=window.innerWidth/2-r/2+window.screenLeft,s=window.open(e,t,"height="+i+", width="+r+", status=yes, toolbar=no, menubar=no, location=no, top="+n+", left="+o);return s?(s.focus(),new Promise(function(e){var t=setInterval(function(){s.closed&&(clearInterval(t),setTimeout(e))},100)})):Promise.reject(new ReferenceError("We were unable to open the popup window, its likely that the request was blocked."))}},{key:"createIframe",value:function(e,t){var i=document.createElement("iframe");return i.setAttribute("owner","salte-auth"),t?((0,o.assign)(i.style,{position:"fixed",top:0,bottom:0,left:0,right:0,height:"100%",width:"100%",zIndex:9999,border:"none",opacity:0,transition:"0.5s opacity"}),setTimeout(function(){i.style.opacity=1})):i.style.display="none",i.src=e,document.body.appendChild(i),new Promise(function(e){i.addEventListener("DOMNodeRemoved",function(){setTimeout(e)})})}},{key:"addXHRInterceptor",value:function(e){this.$interceptors.xhr.push(e)}},{key:"addFetchInterceptor",value:function(e){this.$interceptors.fetch.push(e)}},{key:"$iframe",get:function(){return window.self===window.top?null:parent.document.querySelector('body > iframe[owner="salte-auth"]')}},{key:"$popup",get:function(){return window.opener&&"salte-auth"===window.name?window:null}}]),e}();(0,o.set)(window,"salte.SalteAuthUtilities",(0,o.get)(window,"salte.SalteAuthUtilities",s)),t.SalteAuthUtilities=s}])});
//# sourceMappingURL=salte-auth.min.js.map